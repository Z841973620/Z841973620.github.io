System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(i){"use strict";var s,u,t,e,o,n,r,a,c,m,l,_;return{setters:[function(i){s=i.applyDecoratedDescriptor,u=i.inheritsLoose,t=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){o=i.cclegacy,n=i._decorator,r=i.AudioClip,a=i.AudioSource,c=i.game,m=i.Component,l=i.assert},function(i){_=i.default}],execute:function(){var p,f,h,d,v,x,g,b,y,w,M,k,A;o._RF.push({},"9d88fZCqehI+YEoW+45izTS","AudioManager",void 0);var j=n.ccclass,z=n.property;i("AudioManager",(p=j("AudioManager"),f=z(r),h=z(r),d=z(r),v=z(r),x=z(r),p((y=s((b=function(i){function s(){for(var s,u=arguments.length,o=new Array(u),n=0;n<u;n++)o[n]=arguments[n];return s=i.call.apply(i,[this].concat(o))||this,t(s,"sfx_coin",y,e(s)),t(s,"sfx_click",w,e(s)),t(s,"sfx_shiroko_jump",M,e(s)),t(s,"sfx_sumire_jump",k,e(s)),t(s,"sfx_countdown",A,e(s)),s.audio_sfx=null,s.map_sfx=void 0,s.map_music=void 0,s.prev_volumn=.8,s.curr_music="",s}u(s,i);var o=s.prototype;return o.start=function(){this.audio_sfx=this.node.addComponent(a),this.audio_sfx.playOnAwake=!1;var i=this.getComponentsInChildren(a),s=function(s){var u=i.find((function(i){return i.node.name===s}));return l(u,"Oops, not found the audio source: "+s),u};this.map_music={music_bgm:s("music_bgm"),music_playing_bgm:s("music_playing_bgm"),music_win:s("music_win"),music_lose:s("music_lose")},this.map_sfx={sfx_coin:this.sfx_coin,sfx_click:this.sfx_click,sfx_shiroko_jump:this.sfx_shiroko_jump,sfx_sumire_jump:this.sfx_sumire_jump,sfx_countdown:this.sfx_countdown},_.setAudioManager(this),c.addPersistRootNode(this.node),_.getAudioManager().beep("sfx_click",0)},o.playMusic=function(i,s,u){if(void 0===u&&(u=1),i!==this.curr_music)if(this.map_music[i]){var t=this.map_music[this.curr_music];t&&t.stop(),(t=this.map_music[i]).loop=s,t.volume=this.isMuted()?0:u,t.play(),this.curr_music=i}else console.warn("Unknown music:",i);else{var e=this.map_music[this.curr_music];e.playing||(e.currentTime=0,e.volume=this.isMuted()?0:u,e.play())}},o.stopMusic=function(){var i=this.map_music[this.curr_music];i&&i.stop(),this.curr_music=""},o.pauseMusic=function(){var i=this.map_music[this.curr_music];i&&i.pause()},o.resumeMusic=function(){var i=this.map_music[this.curr_music];i&&i.play()},o.beep=function(i,s){void 0===s&&(s=.8);var u=this.map_sfx[i];u?this.audio_sfx.playOneShot(u,s):console.warn("Unknown sfx clip:",i)},o.isMuted=function(){return 0===this.audio_sfx.volume},o.mute=function(){if(!this.isMuted())for(var i in this.prev_volumn=this.audio_sfx.volume,this.audio_sfx.volume=0,this.map_music)this.map_music[i].volume=0},o.unmute=function(){for(var i in this.audio_sfx.volume=this.prev_volumn,this.map_music)this.map_music[i].volume=this.prev_volumn},s}(m)).prototype,"sfx_coin",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=s(b.prototype,"sfx_click",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=s(b.prototype,"sfx_shiroko_jump",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=s(b.prototype,"sfx_sumire_jump",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=s(b.prototype,"sfx_countdown",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=b))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerObject.ts"],(function(t){"use strict";var e,n,r,o,c,i,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.UITransform,c=t.Vec3,i=t.Size},function(t){a=t.LayerObject}],execute:function(){var s;n._RF.push({},"f1193BE+FdJf68QBb/xk+/r","BackgroundLayer",void 0);var u=r.ccclass;r.property,t("BackgroundLayer",u("BackgroundLayer")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){},r.update=function(t){var e=this.getComponent(o),n=new c(e.contentSize.width,0,0);(n=this.cam.worldToScreen(n)).x<this.viewWidth()&&e.setContentSize(new i(2*e.contentSize.width,e.contentSize.height))},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/BgHaloLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerObject.ts"],(function(t){"use strict";var e,r,o,n;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,o=t._decorator},function(t){n=t.LayerObject}],execute:function(){var c;r._RF.push({},"5de947A9hRAyIM8G9kFkYte","BgHaloLayer",void 0);var a=o.ccclass;o.property,t("BgHaloLayer",a("BgHaloLayer")(c=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var o=r.prototype;return o.start=function(){},o.update=function(t){},r}(n))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/Cloud.ts",["./rollupPluginModLoBabelHelpers.js","cc","./random.ts"],(function(i){"use strict";var t,r,n,e,o,a,u,s,c,l,h,d,p,g;return{setters:[function(i){t=i.applyDecoratedDescriptor,r=i.inheritsLoose,n=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){o=i.cclegacy,a=i._decorator,u=i.error,s=i.UITransform,c=i.resources,l=i.SpriteFrame,h=i.Sprite,d=i.Component,p=i.Vec2},function(i){g=i.rndrang}],execute:function(){var f,m,y,_,w,v,b;o._RF.push({},"d2695MqZxlMurvllY3mSaEY","Cloud",void 0);var C=a.ccclass,z=a.property;i("Cloud",(f=C("Cloud"),m=z(),y=z(),f((v=t((w=function(i){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=i.call.apply(i,[this].concat(o))||this,n(t,"margin_right",v,e(t)),n(t,"y_range",b,e(t)),t.margin_width=0,t.y=0,t.inited=!1,t}r(t,i);var o=t.prototype;return o.start=function(){},o.update=function(i){},o.getFullWidth=function(){if(this.inited)return this.getComponent(s).width+this.margin_width;u("The cloud is not initialized")},o.getPosY=function(){return this.y},o.getMarginWidth=function(){return this.margin_width},o.init=function(i){var t=this;this.inited?u("The cloud is initialized"):i&&(this.margin_width=g(this.margin_right),this.y=g(this.y_range),c.load("/cloud/"+i+"/spriteFrame",l,(function(i,r){t.getComponent(h).spriteFrame=r})),this.inited=!0)},t}(d)).prototype,"margin_right",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(-50,600)}}),b=t(w.prototype,"y_range",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(-30,40)}}),_=w))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/CloudLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./random.ts","./Cloud.ts","./LayerObject.ts"],(function(t){"use strict";var e,i,o,n,r,s,l,u,c,a,d,h,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.Prefab,u=t.instantiate,c=t.Vec2,a=t.Vec3},function(t){d=t.default},function(t){h=t.rndrang_i},function(t){p=t.Cloud},function(t){f=t.LayerObject}],execute:function(){var y,g,w,v,b;r._RF.push({},"4c9dfFFojtKMJ39fuuKwRIB","CloudLayer",void 0);var C=s.ccclass,P=s.property;t("CloundLayer",(y=C("CloundLayer"),g=P({type:l}),y((b=e((v=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"cloud_prefab",b,n(e)),e.clouds=[],e.cloudType=["cloud1","cloud2","cloud3"],e.width=0,e}i(e,t);var r=e.prototype;return r.start=function(){},r.update=function(t){if(d.isPlaying()){for(var e=this.clouds.length-1;e>-1;e--){var i=this.clouds[e].node.getWorldPosition();i.x+=this.clouds[e].getFullWidth(),(i=this.cam.worldToScreen(i)).x<0&&(this.clouds[e].node.destroy(),this.clouds.splice(e,1))}for(;;)if(0!==this.clouds.length){var o=this.clouds[this.clouds.length-1],n=o.node.getWorldPosition();if(n.x+=o.getFullWidth(),!((n=this.cam.worldToScreen(n)).x<this.viewWidth()))break;this.spawnCloud(this.width)}else this.spawnCloud(this.width)}},r.spawnCloud=function(t){var e=u(this.cloud_prefab),i=e.getComponent(p),o=this.cloudType[h(new c(0,3))];i.init(o);var n=i.getPosY();return e.setParent(this.node),e.setPosition(new a(t,n,0)),this.clouds.push(i),this.width+=i.getFullWidth(),i},e}(f)).prototype,"cloud_prefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=v))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/CoinScore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var o,e,n,r,i,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.Label,i=t.Component},function(t){c=t.default}],execute:function(){var s;e._RF.push({},"a0ad1UDIWtBJptGNDz0/Lfs","CoinScore",void 0);var u=n.ccclass;n.property,t("CoinScore",u("CoinScore")(s=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){this.getComponent(r).string="+"+c.getPerCoinScore()},n.update=function(t){},n.onCoinScoreHide=function(){this.node.destroy()},e}(i))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/crypto.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){t("encrypt",(function(t,r,e){var c=CryptoJS.enc.Utf8.parse(r),o=CryptoJS.enc.Utf8.parse(e);return CryptoJS.AES.encrypt(t,c,{iv:o,mode:CryptoJS.mode.CBC}).toString(CryptoJS.format.Hex)})),r._RF.push({},"56cbdSiDVJBJLD8kPj8YjUe","crypto",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/FakeCinema.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./LayerDef.ts","./Player.ts"],(function(e){"use strict";var t,i,a,n,r,o,l,c,s,d,u,y,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Camera,c=e.Rect,s=e.View,d=e.Vec3,u=e.Component},function(e){y=e.default},function(e){h=e.LayerDef},function(e){m=e.Player}],execute:function(){var p,f,_,g,z,v,w,b,x,P,F,C,D;r._RF.push({},"0dc41jD88FJF4cQhWnUSnRH","FakeCinema",void 0);var k=o.ccclass,R=o.property;e("FakeCinema",(p=k("FakeCinema"),f=R({type:l}),_=R({type:m}),g=R({type:c}),z=R(),v=R({type:[h]}),p((x=t((b=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"cam",x,n(t)),a(t,"target",P,n(t)),a(t,"dead_zone_rect",F,n(t)),a(t,"limit_down",C,n(t)),a(t,"layer_defs",D,n(t)),t.dead_zone=void 0,t}i(t,e);var r=t.prototype;return r.start=function(){var e=s.instance.getViewportRect(),t=.5*e.width,i=.5*e.height;this.dead_zone={xmin:t-e.width*this.dead_zone_rect.x*.5,ymin:i-e.height*this.dead_zone_rect.y*.5,xmax:t+e.width*this.dead_zone_rect.width*.5,ymax:i+e.height*this.dead_zone_rect.height*.5}},r.update=function(e){var t=this;if(y.isPlaying()){var i=this.target.node.getWorldPosition(),a=(i=this.cam.worldToScreen(i)).x<this.dead_zone.xmin||i.x>this.dead_zone.xmax,n=i.y<this.dead_zone.ymin||i.y>this.dead_zone.ymax,r=this.target.velocity();a||(r.x=0),(!n||this.cam.node.getPosition().y<this.limit_down)&&(r.y=0),this.move(this.cam.node,r),this.layer_defs.forEach((function(e){if("halo"!==e.layer.node.name)t.move(e.layer.cam.node,r.clone().multiplyScalar(e.speed_ratio));else{var i=r.clone().multiplyScalar(e.speed_ratio);t.move(e.layer.cam.node,new d(0,i.y,0))}}))}},r.move=function(e,t){e.setPosition(e.getPosition().add(t))},t}(u)).prototype,"cam",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(b.prototype,"target",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(b.prototype,"dead_zone_rect",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(b.prototype,"limit_down",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-400}}),D=t(b.prototype,"layer_defs",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=b))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/FollowChildRigidBody.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var o,t,n,e;return{setters:[function(i){o=i.inheritsLoose},function(i){t=i.cclegacy,n=i._decorator,e=i.Component}],execute:function(){var r;t._RF.push({},"346a9CdyRtKdbnGLqOPBTA+","FollowChildRigidBody",void 0);var s=n.ccclass;n.property,i("FollowChildRigidBody",s("FollowChildRigidBody")(r=function(i){function t(){for(var o,t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return(o=i.call.apply(i,[this].concat(n))||this).initial_pos=void 0,o}o(t,i);var n=t.prototype;return n.start=function(){this.initial_pos=this.node.getPosition()},n.update=function(i){this.node.setPosition(this.initial_pos)},t}(e))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./SimpleInput.ts","./UiLayer.ts","./GameManager.ts"],(function(e){"use strict";var t,n,i,a,o,r,c,s,l,u,p,y,d,h,f,g,m,_,v,C,A,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,l=e.Node,u=e.Collider2D,p=e.KeyCode,y=e.Contact2DType,d=e.view,h=e.find,f=e.UIOpacity,g=e.tween,m=e.Component,_=e.Vec3},function(e){v=e.Player},function(e){C=e.SimpleInput},function(e){A=e.UiLayer},function(e){b=e.default}],execute:function(){var P,T,O,R,K,w,G,I,S;c._RF.push({},"8edcauugplBFIFY0ATUPtMI","GameController",void 0);var E=s.ccclass,k=s.property,z=e("Action",{act_left:"act_left",act_right:"act_right",act_jump:"act_jump",act_up:"act_up",act_down:"act_down",act_pause_resume:"act_pause_resume"});e("GameController",(P=E("GameController"),T=k({type:l}),O=k({type:l}),R=k({type:u}),P((G=t((w=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"player",G,a(t)),i(t,"ui",I,a(t)),i(t,"gameOverChecker",S,a(t)),t}n(t,e);var c=t.prototype;return c.start=function(){var e=this,t=C.instance;t.bindActionToKey(z.act_left,p.KEY_A),t.bindActionToKey(z.act_left,p.ARROW_LEFT),t.bindActionToKey(z.act_right,p.KEY_D),t.bindActionToKey(z.act_right,p.ARROW_RIGHT),t.bindActionToKey(z.act_jump,p.SPACE),t.bindActionToKey(z.act_jump,p.KEY_J),t.bindActionToKey(z.act_jump,255),t.bindActionToKey(z.act_up,p.KEY_W),t.bindActionToKey(z.act_up,p.ARROW_UP),t.bindActionToKey(z.act_down,p.ARROW_DOWN),t.bindActionToKey(z.act_pause_resume,p.KEY_S),this.gameOverChecker.on(y.BEGIN_CONTACT,this.checkGameOver,this),t.start(),this.transitionIn(),d.on("canvas-resize",this.onCanvasResize,this),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&b.isPlaying()&&e.ui.getComponent(A).onClickPauseButton()}))},c.update=function(e){C.instance.update(),b.isPlaying()&&b.flushPlayerScore(),this.ui.getComponent(A).setScore(b.getPlayerScore())},c.onDestroy=function(){C.instance.destroy(),this.gameOverChecker.off(y.BEGIN_CONTACT,this.checkGameOver,this),d.off("canvas-resize",this.onCanvasResize,this)},c.onCanvasResize=function(){b.isPlaying()&&this.ui.getComponent(A).onClickPauseButton()},c.transitionIn=function(){var e=h("Canvas/transition").getComponent(f);e.opacity=255,g(e).to(.5,{opacity:0},{easing:"fade"}).start()},c.checkGameOver=function(e,t,n){t.node===this.player&&this.handleGameOver()},c.handleGameOver=function(){var e=o(r().mark((function e(){var t,n,i,a,o,c,s,l,u,p,y,d,h,f=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.getPlayerScore()>b.getPlayerMaxScore(),i=b.isAdvanceRoleEnabled(),a=b.getIsBestRecord(),e.next=5,b.gameOver();case 5:this.player.getComponent(v).setPlayerInitPos(new _(-1500,0,0)),o=b.isAdvanceRoleEnabled(),c=!i&&o,s=b.getPlayerScore(),l=b.getPlayerRole(),u=this.player.getComponent(v).getPlayerInfo(l),p=b.getDiffAdvanceScore(),(h=null!=(t=u.settle.find((function(e){return s>=e.score})))?t:u.settle[u.settle.length-1])&&(y=h.avatar,d=h.text),this.scheduleOnce((function(){n?b.getAudioManager().playMusic("music_win",!0):b.getAudioManager().playMusic("music_lose",!0),f.ui.getComponent(A).settlePopupShow(s,y,d,p,c,a)}),1);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(m)).prototype,"player",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(w.prototype,"ui",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(w.prototype,"gameOverChecker",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=w))||K));c._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./Player.ts","./online.ts"],(function(e){"use strict";var t,r,i,s,n,a,o,c,u,h,l,_,m;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){i=e.cclegacy,s=e.Vec2,n=e.sys,a=e.director},null,function(e){o=e.default},function(e){c=e.pauseGame,u=e.resumeGame,h=e.initConfig,l=e.startGame,_=e.fetchGameMaxScore,m=e.submitGameScore}],execute:function(){i._RF.push({},"257b8wXhtVGg6ISs5aORd6T","GameManager",void 0);var p=e("Consts",{PlayerMaxScoreKey:"player_max_score",PlayerTotalScoreKey:"player_total_score",CommonRole:"sumire",AdvanceRole:"shiroko"});e("default",new(function(){function e(){this.server_time=0,this.cipher_info="",this.audio_manager_inst=void 0,this.is_user_activated=!1,this.game_max_score=0,this.player_score=0,this.player_encoded_score=0,this.player_role=p.CommonRole,this.playing_start_time=0,this.playing_curr_time=0,this.playing_num_coins=0,this.is_playing=!1,this.pause_start_time=0,this.pause_time=0,this.advance_role_score_threshold=1e6,this.per_time_score={sumire:10,shiroko:20},this.per_coin_score={sumire:20,shiroko:30},this.playerMaxScoreLimit=9e5,this.playerMaxTotalScore=999999999,this.stageLimit=8,this.PerSpeedForceDis=40,this.terrain_block_width={sumire:[new s(300,1200),new s(225,1e3),new s(150,800),new s(90,600)],shiroko:[new s(300,1200),new s(225,1e3),new s(150,800),new s(90,600)]},this.init_speed_force=11,this.stage_time=[15,45,70,120],this.loopTime=180,this.incSpeed=1.2}var i=e.prototype;return i.getUserActivated=function(){return this.is_user_activated},i.userActivate=function(){this.is_user_activated=!0},i.getAudioManager=function(){return this.audio_manager_inst},i.setAudioManager=function(e){this.audio_manager_inst=e},i.getAudioIsMuted=function(){return this.audio_manager_inst.isMuted()},i.initialize=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:t=e.sent,this.advance_role_score_threshold=t.advrolescore,this.per_coin_score.sumire=t.sumire.percoinscore,this.per_coin_score.shiroko=t.shiroko.percoinscore,this.per_time_score.sumire=t.sumire.pertimescore,this.per_time_score.shiroko=t.shiroko.pertimescore;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.callStartGame=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:t=e.sent,this.server_time=t.servertime,this.cipher_info=t.cipherinfo;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.fetchGameMaxScore=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=e.sent,this.game_max_score=t.maxscore,e.abrupt("return",this.game_max_score);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getPlayerMaxScore=function(){return Number(n.localStorage.getItem(p.PlayerMaxScoreKey))||0},i.getPlayerTotalScore=function(){return Number(n.localStorage.getItem(p.PlayerTotalScoreKey))||0},i.submitScore=function(){var e=t(r().mark((function e(){var t,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.getPlayerScore())>this.getPlayerMaxScore()&&n.localStorage.setItem(p.PlayerMaxScoreKey,t.toString()),i=Math.min(this.getPlayerTotalScore()+t,this.playerMaxTotalScore),n.localStorage.setItem(p.PlayerTotalScoreKey,i.toString()),e.next=6,m(this.player_encoded_score,this.getPlayerRole(),this.cipher_info);case 6:s=e.sent,this.game_max_score=s.maxscore;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getPerCoinScore=function(){return this.per_coin_score[this.getPlayerRole()]},i.isPlaying=function(){return this.is_playing},i.pause=function(){this.is_playing=!1,this.pause_start_time=Date.now(),this.getAudioManager().pauseMusic(),c()},i.resume=function(){this.is_playing=!0,this.pause_time+=Date.now()-this.pause_start_time,this.getAudioManager().resumeMusic(),u()},i.startGame=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("== GAME START =="),e.next=3,this.callStartGame();case 3:this.pause_time=0,this.player_score=0,this.player_encoded_score=0,this.playing_start_time=Date.now(),this.playing_curr_time=this.playing_start_time,this.playing_num_coins=0,this.is_playing=!0,a.loadScene("game");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.gameOver=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("== GAME OVER =="),this.is_playing=!1,this.flushPlayerScore(),e.next=5,this.submitScore();case 5:this.playing_curr_time=Date.now();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getIsBestRecord=function(){return this.getPlayerScore()>this.getPlayerMaxScore()},i.getPlayerScore=function(){return this.player_score},i.incCoin=function(e){void 0===e&&(e=1),this.playing_num_coins+=e},i.flushPlayerScore=function(){if(this.isPlaying()){var e=this.getPlayerRole();this.playing_curr_time=Date.now();var t=(this.playing_curr_time-this.playing_start_time-this.pause_time)/1e3>>0,r=this.playing_num_coins;this.player_encoded_score=t<<16|r,this.player_score=Math.min(t*this.per_time_score[e]+r*this.per_coin_score[e],this.playerMaxScoreLimit)}},i.getGameTime=function(){return this.playing_curr_time=Date.now(),(this.playing_curr_time-this.playing_start_time-this.pause_time)/1e3},i.getGameStage=function(){var e=this.getGameTime(),t=this.stage_time.length,r=0;if(this.loopTime>0&&e>this.stage_time[t-1])r=Math.floor((e-this.stage_time[t-1])/this.loopTime)+t-1;else for(var i=0,s=t;i<s;i++){if(e<this.stage_time[i]){r=i;break}if(i===s-1){r=i;break}}return Math.min(r,this.stageLimit)},i.getTerrainBlockWidth=function(){return this.terrain_block_width[this.getPlayerRole()][Math.min(this.getGameStage(),3)]},i.getTerrainBlockHeight=function(){var e=400+50*this.getGameStage();return new s(e,e+100)},i.getTerrainBlockMarginRight=function(){if("sumire"===this.getPlayerRole()){var e=this.getPlayerSpeedForce()*this.PerSpeedForceDis*.8;return new s(.7*e,e)}if("shiroko"===this.getPlayerRole()){var t=this.getPlayerSpeedForce()*this.PerSpeedForceDis*1.8;return new s(.7*t,t)}},i.getPlayerSpeedForce=function(){return this.init_speed_force*Math.pow(this.incSpeed,this.getGameStage())},i.isAdvanceRoleEnabled=function(){return this.getPlayerTotalScore()>=this.advance_role_score_threshold},i.tryAndSelectPlayerRole=function(e){return e!==p.AdvanceRole||this.isAdvanceRoleEnabled()?(this.player_role=e,!0):(this.player_role=p.CommonRole,!1)},i.getPlayerRole=function(){return this.player_role},i.getPlayerInfo=function(){return o.getPlayerInfo(this.getPlayerRole())},i.getDiffAdvanceScore=function(){return this.advance_role_score_threshold-this.getPlayerTotalScore()},e}()));i._RF.pop()}}}));

System.register("chunks:///_virtual/Gold.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./random.ts","./resources.ts"],(function(t){"use strict";var n,e,i,o,r,s,a,c,u,l,d,h,p,f,g,b,y;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy,r=t._decorator,s=t.BoxCollider2D,a=t.Contact2DType,c=t.RigidBody2D,u=t.tween,l=t.Vec3,d=t.Vec2,h=t.Component,p=t.Sprite,f=t.error},function(t){g=t.default},function(t){b=t.rndrang},function(t){y=t.loadAsync}],execute:function(){var m;o._RF.push({},"33bf6y7+KFNX6y7XxA8gs2N","Gold",void 0);var v=r.ccclass;t("Gold",v("Gold")(m=function(t){function o(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).inited=!1,n.collider=null,n.rb2d=void 0,n.bump=!1,n}n(o,t);var r=o.prototype;return r.start=function(){this.collider=this.getComponent(s),this.collider.on(a.BEGIN_CONTACT,this.onBeginContact,this),this.rb2d=this.getComponent(c),this.shakeAnima()},r.update=function(t){g.isPlaying()&&this.bump&&(this.rb2d.enabled=!1)},r.onDestroy=function(){this.collider.off(a.BEGIN_CONTACT,this.onBeginContact,this)},r.onBeginContact=function(t,n,e){var i=this;4!==n.tag||this.bump||(this.bump=!0,g.incCoin(),g.getAudioManager().beep("sfx_coin"),u(this.node).to(.1,{scale:new l(-1,1,1)}).to(.1,{scale:new l(1,1,1)}).to(.1,{scale:new l(-1,1,1)}).call((function(){i.node.destroy()})).start())},r.shakeAnima=function(){var t=this;this.scheduleOnce((function(){u(t.node).by(.5,{position:new l(0,5,0)}).by(.5,{position:new l(0,0,0)}).by(.5,{position:new l(0,-5,0)}).by(.5,{position:new l(0,0,0)}).union().repeatForever().start()}),b(new d(0,1)))},r.init=function(){var t=e(i().mark((function t(n){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=3;break}return f("The gold is initialized"),t.abrupt("return");case 3:if(n){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,y("/gold/"+n);case 7:e=t.sent,this.getComponent(p).spriteFrame=e,this.inited=!0;case 10:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),o}(h))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/http.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy}],execute:function(){e("request",(function(e){return s.apply(this,arguments)})),n._RF.push({},"aa484BY2pFDlpmURAv7bI2c","http",void 0);function s(){return(s=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=new XMLHttpRequest;if(n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)if(n.status>=200&&n.status<300)try{var t=JSON.parse(n.responseText);e(t)}catch(e){console.error(n.responseText),r(new Error("Invalid response body: failed to parse json"))}else r(new Error("Failed to request (status="+n.status+")"))},n.ontimeout=function(){r(new Error("Timeout"))},t.params){var s=[];for(var o in t.params)s.push(o+"="+t.params[o]);var a=s.join("&");-1===t.url.indexOf("?")?t.url+="?"+a:t.url+="&"+a}n.timeout=5e3,n.withCredentials=!0,n.open(t.method,t.url),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(t.body?JSON.stringify(t.body):null)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./online.ts"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy},function(t){var a={};a.fetchGameMaxScore=t.fetchGameMaxScore,a.initConfig=t.initConfig,a.pauseGame=t.pauseGame,a.resumeGame=t.resumeGame,a.startGame=t.startGame,a.submitGameScore=t.submitGameScore,e(a)}],execute:function(){t._RF.push({},"1f081fGVltJyryHz6Ln1Wpr","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDef.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerObject.ts"],(function(e){"use strict";var r,t,i,n,a,o,c,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Component},function(e){l=e.LayerObject}],execute:function(){var u,s,p,f,y,b,L;a._RF.push({},"5f1c0WqeuZOU4tfSnPJ2MmG","LayerDef",void 0);var d=o.ccclass,h=o.property;e("LayerDef",(u=d("LayerDef"),s=h({type:l}),p=h(),u((b=r((y=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,i(r,"layer",b,n(r)),i(r,"speed_ratio",L,n(r)),r}return t(r,e),r}(c)).prototype,"layer",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=r(y.prototype,"speed_ratio",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=y))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/LayerObject.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,a,c,o,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,c=e._decorator,o=e.Camera,l=e.View,u=e.Component}],execute:function(){var p,s,y,f,w,h,b;a._RF.push({},"88fc7cQBdBBcIC7RDpf4xUw","LayerObject",void 0);var d=c.ccclass,v=c.property;e("LayerObject",(p=d("LayerObject"),s=v({type:o}),y=v(),p((h=t((w=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,i(t,"cam",h,n(t)),i(t,"view_width_ratio",b,n(t)),t}return r(t,e),t.prototype.viewWidth=function(){return l.instance.getViewportRect().width*this.view_width_ratio},t}(u)).prototype,"cam",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(w.prototype,"view_width_ratio",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=w))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BackgroundLayer.ts","./BgHaloLayer.ts","./Cloud.ts","./CloudLayer.ts","./CoinScore.ts","./FakeCinema.ts","./FollowChildRigidBody.ts","./GameController.ts","./Gold.ts","./LayerDef.ts","./LayerObject.ts","./Player.ts","./SimpleInput.ts","./TerrainBlock.ts","./TerrainLayer.ts","./UiLayer.ts","./AudioManager.ts","./GameManager.ts","./PickController.ts","./SplashController.ts","./StartController.ts","./index.ts","./mock.ts","./online.ts","./http.ts","./crypto.ts","./math.ts","./random.ts","./resources.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/math.ts",["cc"],(function(t){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){function r(t,c){return t.x*c.y-t.y*c.x}t({cross2d:r,intersaction:function(t,c,n,u){var e=c.clone().subtract(t),s=u.clone().subtract(n);if(0!=r(e,s)){var a=r(n.clone().subtract(t),s)/r(e,s);return e.multiplyScalar(a).add(t)}}}),c._RF.push({},"36024rvV11PvZ9+IGIwVQtu","math",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/mock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,t,n;return{setters:[function(r){e=r.asyncToGenerator,t=r.regeneratorRuntime},function(r){n=r.cclegacy}],execute:function(){function c(){return(c=e(t().mark((function r(){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{servertime:Date.now(),cipherinfo:""});case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}r({fetchGameMaxScore:o,initConfig:function(){return a.apply(this,arguments)},startGame:function(){return c.apply(this,arguments)},submitGameScore:function(r,e){return s.apply(this,arguments)}}),n._RF.push({},"2b03dH1qCRGiox0o7XcW0PF","mock",void 0);var u=0;function o(){return i.apply(this,arguments)}function i(){return(i=e(t().mark((function r(){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{maxscore:u});case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function s(){return(s=e(t().mark((function r(e,n){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e>u&&(u=e),r.abrupt("return",o());case 2:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function a(){return(a=e(t().mark((function r(){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{advrolescore:1e4,sumire:{pertimescore:10,percoinscore:20},shiroko:{pertimescore:20,percoinscore:30}});case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/online.ts",["./rollupPluginModLoBabelHelpers.js","cc","./http.ts","./crypto.ts"],(function(r){"use strict";var t,n,e,u,a;return{setters:[function(r){t=r.asyncToGenerator,n=r.regeneratorRuntime},function(r){e=r.cclegacy},function(r){u=r.request},function(r){a=r.encrypt}],execute:function(){function s(){return(s=t(n().mark((function r(){var t;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l("./startgame.json");case 2:return t=r.sent,r.abrupt("return",{servertime:t.t,cipherinfo:t.x});case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function c(){return(c=t(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",l("./maxscore.json"));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function i(){return(i=t(n().mark((function r(t,e,u){var s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=a(t.toString()+"_"+e,u.substring(0,32),u.substring(32)),r.abrupt("return",l("./submitscore.json",{x:s}));case 2:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function o(){return(o=t(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",l("./initconfig.json"));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function p(){return(p=t(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",v("./pausegame"));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function f(){return(f=t(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",v("./resumegame"));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}r({fetchGameMaxScore:function(){return c.apply(this,arguments)},initConfig:function(){return o.apply(this,arguments)},pauseGame:function(){return p.apply(this,arguments)},resumeGame:function(){return f.apply(this,arguments)},startGame:function(){return s.apply(this,arguments)},submitGameScore:function(r,t,n){return i.apply(this,arguments)}}),e._RF.push({},"46f9bvgH/VPJLiIox6PzWyZ","online",void 0);function h(r){return r}function m(r){return 0!==r.code&&console.error(r.msg),r.data}function l(r,t){return y.apply(this,arguments)}function y(){return(y=t(n().mark((function r(t,e){var a;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u({method:"GET",url:h(t),params:e});case 2:return a=r.sent,r.abrupt("return",m(a));case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function v(r,t){return x.apply(this,arguments)}function x(){return(x=t(n().mark((function r(t,e){var a;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u({method:"POST",url:h(t),body:e});case 2:return a=r.sent,r.abrupt("return",m(a));case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}e._RF.pop()}}}));

System.register("chunks:///_virtual/PickController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(o){"use strict";var t,n,e,a,i,r,s,c,u,p,l,d,g,f,v,m,C,_;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,a=o.find,i=o.director,r=o.resources,s=o.Animation,c=o.UIOpacity,u=o.tween,p=o.UITransform,l=o.Vec3,d=o.SpriteFrame,g=o.Sprite,f=o.Tween,v=o.Label,m=o.Component},function(o){C=o.default,_=o.Consts}],execute:function(){var b;n._RF.push({},"42a14ir0Z5M0acc3ccbqTRN","PickController",void 0);var h=e.ccclass;e.property,o("PickController",h("PickController")(b=function(o){function n(){for(var t,n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];return(t=o.call.apply(o,[this].concat(e))||this).faqAnimation=void 0,t.pickAnimation=void 0,t.outAnimation=void 0,t.bgNode=null,t.bgRollSpeed=50,t}t(n,o);var e=n.prototype;return e.start=function(){this.transitionIn(),C.isAdvanceRoleEnabled()&&(a("Canvas/roles/shiroko/avatar_box/mask").active=!1),this.setAudio(),i.preloadScene("game",(function(){console.log("game scene preloaded")})),r.preloadDir("gold",(function(o,t){o&&console.error("preload gold fail",o),console.log("preload gold success")})),r.preloadDir("avatar",(function(o,t){o&&console.error("preload avatar fail",o),console.log("preload avatar success")})),r.preloadDir("popup",(function(o,t){o&&console.error("preload popup fail",o),console.log("preload popup success")})),this.faqAnimation=a("Canvas/faq_popup").getComponent(s),this.pickAnimation=a("Canvas/pick_popup").getComponent(s),this.outAnimation=a("Canvas").getComponent(s),a("Canvas/faq_popup").active=!1,a("Canvas/pick_popup").active=!1,this.bgNode=a("Canvas/bg"),this.bgRoll(),this.selRole(C.getPlayerRole(),!1)},e.update=function(o){},e.transitionIn=function(){var o=a("Canvas/transition").getComponent(c);o.opacity=255,u(o).to(.5,{opacity:0},{easing:"fade"}).start()},e.transitionOut=function(o){var t=a("Canvas/transition").getComponent(c);t.opacity=0,u(t).to(.5,{opacity:255},{easing:"fade"}).call(o).start()},e.bgRoll=function(){var o=this.bgNode.getComponent(p).width,t=o/this.bgRollSpeed,n=u(this.bgNode).to(t,{position:new l(-o,0,0)}),e=u(this.bgNode).to(0,{position:new l(0,0,0)});u(this.bgNode).sequence(n,e).repeatForever().start()},e.setAudio=function(){var o;null!=(o=C.getAudioManager())&&o.isMuted()?r.load("audio/audio_mute_button/spriteFrame",d,(function(o,t){a("Canvas/audio_button").getComponent(g).spriteFrame=t})):r.load("audio/audio_button/spriteFrame",d,(function(o,t){a("Canvas/audio_button").getComponent(g).spriteFrame=t}))},e.onClickStartButton=function(){var o=this;C.getAudioManager().beep("sfx_click"),this.outAnimation.play("pick_out"),this.scheduleOnce((function(){o.startGame()}),.2)},e.startGame=function(){this.transitionOut((function(){f.stopAll(),C.startGame(),C.getAudioManager().playMusic("music_playing_bgm",!0,.5)}))},e.onClickAudioButton=function(o){C.getAudioManager().beep("sfx_click"),C.getAudioManager().isMuted()?(C.getAudioManager().unmute(),r.load("audio/audio_button/spriteFrame",d,(function(t,n){o.currentTarget.getComponent(g).spriteFrame=n}))):(C.getAudioManager().mute(),r.load("audio/audio_mute_button/spriteFrame",d,(function(t,n){o.currentTarget.getComponent(g).spriteFrame=n})))},e.onClickFaqButton=function(){C.getAudioManager().beep("sfx_click"),a("Canvas/faq_popup").active=!0,this.faqAnimation.play("popup_show")},e.onClickFaqCloseButton=function(){C.getAudioManager().beep("sfx_click"),a("Canvas/faq_popup").active=!1},e.onClickBackButton=function(){C.getAudioManager().beep("sfx_click"),this.transitionOut((function(){f.stopAll(),i.loadScene("start")}))},e.selRole=function(o,t){void 0===t&&(t=!0);var n=[_.CommonRole,_.AdvanceRole],e=n.indexOf(o);a("Canvas/roles/"+n[e]+"/avatar_box/icon_avatar_border").active=!0,a("Canvas/roles/"+n[1-e]+"/avatar_box/icon_avatar_border").active=!1,t&&u(a("Canvas/roles/"+n[e]+"/avatar_box")).by(.1,{position:new l(0,20,0)},{easing:"quadInOut"}).by(.1,{position:new l(0,-20,0)},{easing:"quadInOut"}).by(.1,{position:new l(0,10,0)},{easing:"quadInOut"}).by(.1,{position:new l(0,-10,0)},{easing:"quadInOut"}).by(.1,{position:new l(0,0,0)},{easing:"quadInOut"}).start()},e.onClickRole=function(o,t){(C.getAudioManager().beep("sfx_click"),t!==C.getPlayerRole())&&(C.tryAndSelectPlayerRole(t)?this.selRole(t):(a("Canvas/pick_popup/popup/diff_score").getComponent(v).string=C.getDiffAdvanceScore().toString(),a("Canvas/pick_popup").active=!0,this.pickAnimation.play("popup_show")))},e.onClickPickCloseButton=function(){C.getAudioManager().beep("sfx_click"),a("Canvas/pick_popup").active=!1},n}(m))||b);n._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./SimpleInput.ts","./GameManager.ts"],(function(t){"use strict";var e,i,o,n,r,s,a,l,u,h,m,p,c,d,g,f,v,y,_,j,b,P,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,a=t._decorator,l=t.Prefab,u=t.Vec3,h=t.RigidBody2D,m=t.Collider2D,p=t.Contact2DType,c=t.Animation,d=t.Vec2,g=t.Quat,f=t.resources,v=t.SpriteFrame,y=t.Sprite,_=t.instantiate,j=t.Component},function(t){b=t.Action},function(t){P=t.SimpleInput},function(t){A=t.default}],execute:function(){var C,x,S,T,w,R;s._RF.push({},"471fd4iSlNPOZYwib6yh2sT","Player",void 0);var k=a.ccclass,N=a.property,B=t("Role",(function(t){this.name=void 0,this.nickname=void 0,this.description=void 0,this.jumpTimes=void 0,this.animation=void 0,this.gold=void 0,this.jump_sfx=void 0,this.settle=void 0,this.name=t.name,this.nickname=t.nickname,this.description=t.description,this.jumpTimes=t.jumpTimes,this.gold=t.gold,this.animation={run:t.name+"_run",jump:t.name+"_jump"},this.jump_sfx="sfx_"+t.name+"_jump",this.settle=t.settle})),F=t("Player",(C=k("Player"),x=N({type:l}),C((w=e((T=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"jump_force",w,n(e)),o(e,"coin_score_prefab",R,n(e)),e.prev_pos=new u,e.rb2d=void 0,e.jump=0,e.ground=void 0,e.roleNode=void 0,e.roles={shiroko:new B({name:"shiroko",nickname:"シロコ",gold:"bottle_shiroko",jumpTimes:2,description:"ミレニアムサイエンススクール所属、「トレーニング部」の乙花スミレさん。ミレニアムらしい科学的な分析によって、日ごろから効率的なトレーニングを行っています。先生が手伝ってくれれば、さらに良い効果が出るはずです！",settle:[{score:7e3,avatar:"shiroko4",text:"ここまで辿り着けたのは、先生のおかげ。え、ゴール？　……それは、考えてない。だって先生と一緒なら、どこまでも行けそうな気がするから。"},{score:4e3,avatar:"shiroko3",text:"先生のサポートがあったから、ここまで来られた。ありがとう、先生。トレーニングも、「晄輪大祭」当日も、一緒に頑張ろうね。"},{score:1500,avatar:"shiroko2",text:"悪くない成績だね。私はまだまだ行けるけど……先生、手伝ってくれる？"},{score:0,avatar:"shiroko1",text:"焦らなくても大丈夫。少し休んでから、またゆっくり始めよう。"}]}),sumire:new B({name:"sumire",nickname:"スミレ",gold:"protein_sumire",jumpTimes:1,description:"アビドス高等学校所属、「対策委員会」の砂狼シロコさん。「晄輪大祭」に向けてジャージ姿へと着替え、やる気満々のご様子。そのままではどこまでも行ってしまいそうな勢いなので、ぜひ適切にサポートしてあげてください！\t",settle:[{score:6e3,avatar:"sumire4",text:"私だけではきっと、ここまでの結果を出すことはできませんでした。トレーナー……ぜひこれからも、一緒にトレーニングをしてもらえますでしょうか？"},{score:4e3,avatar:"sumire3",text:"良い結果ですね、トレーニングの成果が出たと言えそうです。ありがとうございます、トレーナー！"},{score:1500,avatar:"sumire2",text:"悪くない結果です。それに、やはり走るのは楽しいですね。このまま「晄輪大祭」でも活躍して、みなさんにもっと運動の魅力を知ってもらいましょう。"},{score:0,avatar:"sumire1",text:"想像以上に、体力が足りませんでした。トレーナー。帰ったらトレーニングメニューを作り直しましょう！"}]})},e.role=void 0,e.roleAnimation=void 0,e.runAnimatonState=void 0,e.jumpAnimatonState=void 0,e.startWaitTime=.5,e.startWaitFlag=!0,e}i(e,t);var s=e.prototype;return s.velocity=function(){return this.node.getPosition().subtract(this.prev_pos)},s.start=function(){var t=this.node.getPosition();if(this.prev_pos.x=t.x,this.prev_pos.y=t.y,this.rb2d=this.getComponent(h),!this.rb2d)throw new Error("RigidBody2D is required!!");this.getComponent(m).on(p.BEGIN_CONTACT,this.onBeginContact,this),this.roleNode=this.node.getChildByName("view"),this.roleAnimation=this.roleNode.getComponent(c),this.setRole(A.getPlayerRole()),this.startWait(this.startWaitTime)},s.onDestroy=function(){this.getComponent(m).off(p.BEGIN_CONTACT,this.onBeginContact,this)},s.startWait=function(t){var e=this;this.scheduleOnce((function(){e.startWaitFlag=!1,e.roleAnimation.play(e.role.animation.run)}),t)},s.onBeginContact=function(t,e,i){1!==e.tag||this.roleRunState||this.startWaitFlag||this.roleAnimation.play(this.role.animation.run),1===e.tag&&this.rb2d.linearVelocity.y<0&&(this.ground=e),3===e.tag&&this.spawnCoinScore()},s.update=function(t){if(!A.isPlaying())return this.rb2d.enabled=!1,void this.roleAnimation.pause();this.rb2d.enabled=!0,this.roleAnimation.resume();var e=this.node.getPosition();this.prev_pos.x=e.x,this.prev_pos.y=e.y;var i=this.rb2d.linearVelocity,o=P.instance;i.x=this.startWaitFlag?0:+A.getPlayerSpeedForce(),o.isActionJustPressed(b.act_jump)&&(this.roleAnimation.play(this.role.animation.jump),this.jump<A.getPlayerInfo().jumpTimes&&(i.y=this.jump_force,this.ground=null,this.jump++,A.getAudioManager().beep(this.role.jump_sfx))),this.jump>0&&this.ground&&(this.jump=0),!this.jump&&A.getGameTime()>=2?this.updateRotation(i):this.updateRotation(new d(A.getPlayerSpeedForce(),1)),this.rb2d.linearVelocity=i},s.updateRotation=function(t){if(!(t.lengthSqr()<1e-5)){var e=this.node.getChildByName("view").getRotation(),i=t.x>0?Math.atan2(t.y,t.x):Math.atan2(-t.y,-t.x),o=g.fromAngleZ(g.IDENTITY.clone(),180*i/Math.PI);e=e.slerp(o,.5),this.node.getChildByName("view").setRotation(e)}},s.setRole=function(t){var e=this;this.role=this.roles[t],this.runAnimatonState=this.roleAnimation.getState(this.role.animation.run),this.jumpAnimatonState=this.roleAnimation.getState(this.role.animation.jump),f.load("/role/"+t+"/spriteFrame",v,(function(t,i){e.roleNode.getComponent(y).spriteFrame=i}))},s.setPlayerInitPos=function(t){this.node.setPosition(t)},s.getPlayerInfo=function(t){return this.roles[t]},s.spawnCoinScore=function(){_(this.coin_score_prefab).setParent(this.node)},r(e,[{key:"roleRunState",get:function(){return this.runAnimatonState.isPlaying}}]),e}(j)).prototype,"jump_force",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),R=e(T.prototype,"coin_score_prefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=T))||S));t("default",new F);s._RF.pop()}}}));

System.register("chunks:///_virtual/random.ts",["cc"],(function(r){"use strict";var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){r({rndrang:function(r){var n=r.x,t=r.y;if(n>t){var a=[t,n];n=a[0],t=a[1]}return n+Math.random()*(t-n)},rndrang_i:function(r,n){void 0===n&&(n=!1);var t=r.x,a=r.y;if(t>a){var e=[a,t];t=e[0],a=e[1]}n&&a++;return t+Math.random()*(a-t)>>0}}),n._RF.push({},"ee894IMaMtOSIHcDbxzxaZY","random",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/resources.ts",["cc"],(function(e){"use strict";var r,c,t;return{setters:[function(e){r=e.cclegacy,c=e.resources,t=e.SpriteFrame}],execute:function(){e("loadAsync",(function(e){return new Promise((function(r,s){c.load(e+"/spriteFrame",t,(function(e,c){e&&s(e),r(c)}))}))})),r._RF.push({},"c1b75TSIdRB8pDk50f/KhaF","resources",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/SimpleInput.ts",["cc"],(function(t){"use strict";var n,i,e,o;return{setters:[function(t){n=t.cclegacy,i=t._decorator,e=t.input,o=t.Input}],execute:function(){n._RF.push({},"4fe2fJ9/Y9EvJ+YGXUcbeSi","SimpleInput",void 0);i.ccclass,i.property;var s=t("SimpleInput",function(){function t(){this.key_map=new Array(255).fill(0),this.action_map={}}var n=t.prototype;return n.start=function(){e.on(o.EventType.KEY_DOWN,this.onKeyDown,this),e.on(o.EventType.KEY_UP,this.onKeyUp,this),e.on(o.EventType.TOUCH_START,this.onTouchStart,this),e.on(o.EventType.TOUCH_END,this.onTouchEnd,this)},n.destroy=function(){e.off(o.EventType.KEY_DOWN,this.onKeyDown,this),e.off(o.EventType.KEY_UP,this.onKeyUp,this),e.off(o.EventType.TOUCH_START,this.onTouchStart,this),e.off(o.EventType.TOUCH_END,this.onTouchEnd,this)},n.update=function(){for(var t=this.key_map.length-1;t>-1;t--)this.key_map[t]>0?this.key_map[t]++:this.key_map[t]--},n.bindActionToKey=function(t,n){Array.isArray(this.action_map[t])||(this.action_map[t]=[]),this.action_map[t].push(n)},n.isActionPressed=function(t){var n=this;if(this.action_map[t])return this.action_map[t].some((function(t){return n.key_map[t]>0}))},n.isActionReleased=function(t){var n=this;if(this.action_map[t])return this.action_map[t].every((function(t){return n.key_map[t]<=0}))},n.isActionJustPressed=function(t){var n=this;if(this.action_map[t])return this.action_map[t].some((function(t){return 2===n.key_map[t]}))},n.isActionJustReleased=function(t){var n=this;if(this.action_map[t])return this.action_map[t].some((function(t){return-1===n.key_map[t]}))},n.onKeyDown=function(t){this.key_map[t.keyCode]=1},n.onKeyUp=function(t){this.key_map[t.keyCode]=0},n.onTouchStart=function(t){1===t.getTouches().length&&(this.key_map[255]=1)},n.onTouchEnd=function(){this.key_map[255]=0},t}());s.instance=new s,n._RF.pop()}}}));

System.register("chunks:///_virtual/SplashController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var e,r,n,o,s,a,u;return{setters:[function(t){e=t.inheritsLoose,r=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t._decorator,a=t.Component},function(t){u=t.default}],execute:function(){var c;o._RF.push({},"49739BevbBKhpPLGy652dF+","SplashController",void 0);var i=s.ccclass;s.property,t("SplashController",i("SplashController")(c=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var s=o.prototype;return s.start=function(){u.getUserActivated()&&this.node.destroy()},s.onClick=function(){var t=r(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.userActivate(),u.getAudioManager().unmute(),u.getAudioManager().playMusic("music_bgm",!0),this.node.destroy();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o}(a))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/StartController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var e,n,o,a,r,i,s,c,u,l,p,g,d,f,m,v,C,b,h;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){a=t.cclegacy,r=t._decorator,i=t.find,s=t.UIOpacity,c=t.tween,u=t.UITransform,l=t.Vec3,p=t.resources,g=t.SpriteFrame,d=t.Sprite,f=t.Tween,m=t.director,v=t.Component,C=t.Animation,b=t.Label},function(t){h=t.default}],execute:function(){var _;a._RF.push({},"ce068+oqD9BeY0DFJD0K76m","StartController",void 0);var A=r.ccclass;t("StartController",A("StartController")(_=function(t){function a(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).bgNode=null,e.bgRollSpeed=50,e.faqAnimation=void 0,e}e(a,t);var r=a.prototype;return r.start=function(){var t=n(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.transitionIn(),t.next=3,h.initialize();case 3:this.setSorce(),this.setAudio(),h.getUserActivated()&&h.getAudioManager().playMusic("music_bgm",!0),this.bgNode=i("Canvas/start_bg"),this.faqAnimation=i("Canvas/faq").getComponent(C),i("Canvas/faq").active=!1,this.bgRoll();case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.transitionIn=function(){var t=i("Canvas/transition").getComponent(s);t.opacity=255,c(t).to(.5,{opacity:0},{easing:"fade"}).start()},r.bgRoll=function(){var t=this.bgNode.getComponent(u).width,e=t/this.bgRollSpeed,n=c(this.bgNode).to(e,{position:new l(-t,0,0)}),o=c(this.bgNode).to(0,{position:new l(0,0,0)});c(this.bgNode).sequence(n,o).repeatForever().start()},r.setAudio=function(){h.getAudioManager().isMuted()?p.load("audio/audio_mute_button/spriteFrame",g,(function(t,e){i("Canvas/audio_button").getComponent(d).spriteFrame=e})):p.load("audio/audio_button/spriteFrame",g,(function(t,e){i("Canvas/audio_button").getComponent(d).spriteFrame=e}))},r.onClickStartButton=function(){h.getAudioManager().beep("sfx_click"),c(i("Canvas/transition").getComponent(s)).to(.5,{opacity:255},{easing:"fade"}).call((function(){f.stopAll(),m.loadScene("pick")})).start()},r.onClickAudioButton=function(t){h.getAudioManager().beep("sfx_click"),h.getAudioManager().isMuted()?(h.getAudioManager().unmute(),p.load("audio/audio_button/spriteFrame",g,(function(e,n){t.currentTarget.getComponent(d).spriteFrame=n}))):(h.getAudioManager().mute(),p.load("audio/audio_mute_button/spriteFrame",g,(function(e,n){t.currentTarget.getComponent(d).spriteFrame=n})))},r.onClickFaqButton=function(){i("Canvas/faq").active=!0,h.getAudioManager().beep("sfx_click"),this.faqAnimation.play("popup_show")},r.onClickFaqCloseButton=function(){h.getAudioManager().beep("sfx_click"),i("Canvas/faq").active=!1},r.setSorce=function(){var t=n(o().mark((function t(){var e,n,a,r,s,c,u,l,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h.getPlayerMaxScore(),s=h.getPlayerTotalScore(),t.next=4,h.fetchGameMaxScore();case 4:c=t.sent,u=null==(e=i("Canvas/score_box/max_score/score"))?void 0:e.getComponent(b),l=null==(n=i("Canvas/score_box/total_score/score"))?void 0:n.getComponent(b),p=null==(a=i("Canvas/score_record/score"))?void 0:a.getComponent(b),u&&(u.string=r.toString()),l&&(l.string=s.toString()),p&&(p.string=c.toString());case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a}(v))||_);a._RF.pop()}}}));

System.register("chunks:///_virtual/TerrainBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./math.ts","./random.ts"],(function(e){"use strict";var t,n,i,r,o,a,l,c,s,d,h,u,g,p,f,y,w,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Vec2,c=e.error,s=e.UITransform,d=e.Mask,h=e.Color,u=e.Graphics,g=e.PolygonCollider2D,p=e.Component},function(e){f=e.default},function(e){y=e.intersaction},function(e){w=e.rndrang,m=e.rndrang_i}],execute:function(){var _,v,x,z,C,b,k;o._RF.push({},"e65d9gxtQtHvbRtpeu1HNvC","TerrainBlock",void 0);var B=a.ccclass,T=a.property,S=1,H=2,E=3;e("TerrainBlock",(_=B("TerrainBlock"),v=T(),x=T(),_((b=t((C=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"floor_vertex_range",b,r(t)),i(t,"tile_ratio",k,r(t)),t.inited=!1,t.wh_size=new l,t.margin_width=0,t.block_data=[],t.startHeight=400,t}n(t,e);var o=t.prototype;return o.getBlockSize=function(){if(this.inited)return this.wh_size.clone();c("The terrian is not initialized")},o.getFullSize=function(){if(this.inited)return new l(this.wh_size.x+this.margin_width,this.wh_size.y);c("The terrian is not initialized")},o.getMarginWidth=function(){return this.margin_width},o.init=function(e){if(void 0===e&&(e=!1),!this.inited){this.block_data=this.genBlockData(e),this.margin_width=w(f.getTerrainBlockMarginRight());var t=this.node.getChildByName("mask"),n=t.getChildByName("ground_left"),i=t.getChildByName("ground_right");t.getChildByName("ground_body").getComponent(s).setContentSize(this.wh_size.x,this.wh_size.y),n.getComponent(s).height=this.wh_size.y,i.getComponent(s).height=this.wh_size.y,n.setPosition(0,0),i.setPosition(this.wh_size.x-n.getComponent(s).width,0);var r=t.getComponent(d);r.type=d.Type.GRAPHICS_STENCIL,this.draw(r.graphics,this.block_data);for(var o=[],a=[{clr:(new h).fromHEX("#283050"),exp:new l(12,12),face:E},{clr:(new h).fromHEX("#92a6b2"),exp:new l(8,9),face:H},{clr:(new h).fromHEX("#f0eef7"),exp:new l(8,9),face:S},{clr:(new h).fromHEX("#c3cadd"),exp:new l(8,4),face:E}],p=this.block_data.slice(1,-1),y=0;y<a.length;y++){var m=a[y],_=this.genFloorData(p,m.exp,m.face),v=this.node.getChildByName("floor").getComponent(u);this.draw(v,_,m.clr,!1),0===y&&(o=_)}var x=this.getComponents(g),z=x[0],C=x[1];return z.points=o,z.tag=1,z.apply(),C.points=this.block_data,C.tag=2,C.apply(),this.inited=!0,{floor_data:o.reverse()}}c("The terrian is initialized")},o.genFloorData=function(e,t,n){if(e.length<2)return console.error("Oops, only 1 vertex"),[];var i=e,r=this.contourEndpoint(i[0],i[1],t,n);if(2==i.length)return r;for(var o=[r.slice(0,2)],a=i.length,l=2;l<a;l++){var c=this.contourCorner(i[l-2],i[l-1],i[l],t,n);c&&o.push(c)}var s=this.contourEndpoint(i[a-2],i[a-1],t,n);o.push(s.slice(2).reverse());for(var d=[],h=0;h<o.length;h++)d.push(o[h][0]);for(var u=o.length-1;u>-1;u--)d.push(o[u][1]);return d},o.contourEndpoint=function(e,t,n,i){var r=e.clone().subtract(t),o=new l(-r.y,r.x).normalize().multiplyScalar(n.y),a=o.clone().multiplyScalar(-1),c=r.normalize().multiplyScalar(n.x),s=c.clone().multiplyScalar(-1);return i===E?[o.clone().add(c).add(e),a.clone().add(c).add(e),a.clone().add(s).add(t),o.clone().add(s).add(t)]:i===H?[o.clone().add(c).add(e),c.clone().add(e),s.clone().add(t),o.clone().add(s).add(t)]:[c.clone().add(e),a.clone().add(c).add(e),a.clone().add(s).add(t),s.clone().add(t)]},o.contourCorner=function(e,t,n,i,r){var o=e.clone().subtract(t),a=n.clone().subtract(t),l=this.contourEndpoint(e,t,i,E),c=this.contourEndpoint(n,t,i,E),s=function(e,t,n,i){var r=t.clone().multiplyScalar(1e3).add(e),o=t.clone().multiplyScalar(-1e3).add(e);return y(r,o,n,i)},d=s(l[0],o,t,n),h=s(c[1],a,t,e);if(d&&h){var u=d.subtract(t).add(h.subtract(t)),g=u.clone().multiplyScalar(-1);return u=u.add(t),g=g.add(t),r===E?[u,g]:r===H?[u,t]:[t,g]}},o.genBlockData=function(e){var t,n=w(f.getTerrainBlockWidth()),i=e?this.startHeight:w(f.getTerrainBlockHeight());t=e?0:m(n<=100?new l(0,2):n<=150?new l(0,3):this.floor_vertex_range,!0),this.wh_size.x=n,this.wh_size.y=i;var r=i*(1-this.tile_ratio.y),o=(i-r)/2,a=r+o,c=n/(t+1),s=c*this.tile_ratio.x,d=new Array(4+t).fill(0).map((function(e){return new l})),h=d.length;d[0].x=0,d[0].y=0,d[1].x=0,d[1].y=w(new l(r,i)),d[h-2].x=n,d[h-2].y=e?d[1].y:w(new l(r,i)),d[h-1].x=n,d[h-1].y=0;for(var u=2;u<h-2;u++){var g=w(new l(0,2*Math.PI));d[u].x=c*(u-1)+Math.cos(g)*w(new l(0,s)),d[u].y=a+Math.sin(g)*w(new l(0,o))}return d},o.draw=function(e,t,n,i){void 0===n&&(n=null),void 0===i&&(i=!0),i&&e.clear(),e.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;r++)e.lineTo(t[r].x,t[r].y);e.close(),n&&(e.fillColor=n),e.fill()},t}(p)).prototype,"floor_vertex_range",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(0,2)}}),k=t(C.prototype,"tile_ratio",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(.5,.5)}}),z=C))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/TerrainLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./random.ts","./Gold.ts","./LayerObject.ts","./Player.ts","./TerrainBlock.ts"],(function(e){"use strict";var t,i,n,r,o,l,a,s,c,h,p,d,f,u,g,y,b,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Prefab,s=e.Vec2,c=e.instantiate,h=e.UITransform,p=e.Vec3},function(e){d=e.default,f=e.Consts},function(e){u=e.rndrang_i},function(e){g=e.Gold},function(e){y=e.LayerObject},function(e){b=e.Player},function(e){w=e.TerrainBlock}],execute:function(){var v,P,k,_,m,x,T,z,S;o._RF.push({},"8a70dhNGNhDaqUweZB6CxRC","TerrainLayer",void 0);var C=l.ccclass,L=l.property;e("TerrainLayer",(v=C("TerrainLayer"),P=L({type:a}),k=L({type:a}),_=L({type:b}),v((T=t((x=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"block_prefab",T,r(t)),n(t,"gold_prefab",z,r(t)),n(t,"player",S,r(t)),t.blks=[],t.width=0,t.gold_sky_h=100,t}i(t,e);var o=t.prototype;return o.update=function(e){if(d.isPlaying()){for(var t=this.blks.length-1;t>-1;t--){var i=this.blks[t].node.getWorldPosition();i.x+=this.blks[t].getFullSize().x,(i=this.cam.worldToScreen(i)).x<-150&&(this.blks[t].node.destroy(),this.blks.splice(t,1))}for(;;)if(0!==this.blks.length){var n=this.blks[this.blks.length-1],r=n.node.getWorldPosition();if(r.x+=n.getFullSize().x,!((r=this.cam.worldToScreen(r)).x<this.viewWidth()))break;this.spawnTerrain(this.width)}else this.spawnTerrain(this.width)}},o.spawnGold=function(e,t,i){var n=u(new s(1,e.length/2)),r=e[n].clone(),o=e[n+1].clone(),l=e[e.length/2].clone(),a=c(this.gold_prefab),y=a.getComponent(h).contentSize.width,b=a.getComponent(h).contentSize.height,w=Math.floor((o.x-r.x)/(y+5));if(w>=1)for(var v=0;v<w;v++){var P,k=c(this.gold_prefab),_=void 0;_=1===w?r.clone():r.clone().lerp(o,v/(w-1)),k.getComponent(g).init(null==(P=d.getPlayerInfo())?void 0:P.gold),k.setPosition(new p(_.x+t,_.y+b/2,0)),k.setParent(this.node)}if(u(new s(0,1),!0)){var m,x=c(this.gold_prefab);x.getComponent(g).init(null==(m=d.getPlayerInfo())?void 0:m.gold),x.setPosition(new p(l.x+t+i/2,l.y+b/2+this.gold_sky_h*(d.getPlayerRole()===f.AdvanceRole?2:1),0)),x.setParent(this.node)}},o.spawnTerrain=function(e){var t=c(this.block_prefab);t.setParent(this.node),t.setPosition(new p(e,0,0));var i=t.getComponent(w),n=i.init(0===e).floor_data;if(this.blks.push(i),this.width+=i.getFullSize().x,0===e){var r=this.node.getPosition();this.player.setPlayerInitPos(new p(r.x+50,r.y+i.getFullSize().y,0))}else this.spawnGold(n,e,i.getMarginWidth());return i},t}(y)).prototype,"block_prefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(x.prototype,"gold_prefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(x.prototype,"player",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=x))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/UiLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./resources.ts","./GameController.ts","./Player.ts","./SimpleInput.ts"],(function(e){"use strict";var t,o,p,n,i,s,a,u,r,c,l,d,h,_,g,m,f,v,y,C;return{setters:[function(e){t=e.inheritsLoose,o=e.asyncToGenerator,p=e.regeneratorRuntime},function(e){n=e.cclegacy,i=e._decorator,s=e.find,a=e.Animation,u=e.Label,r=e.resources,c=e.SpriteFrame,l=e.Sprite,d=e.Tween,h=e.director,_=e.Component,g=e.RichText},function(e){m=e.default},function(e){f=e.loadAsync},function(e){v=e.Action},function(e){y=e.default},function(e){C=e.SimpleInput}],execute:function(){var x;n._RF.push({},"7a666R38QRB4ZitFRh19Q3M","UiLayer",void 0);var A=i.ccclass;i.property,e("UiLayer",A("UiLayer")(x=function(e){function n(){for(var t,o=arguments.length,p=new Array(o),n=0;n<o;n++)p[n]=arguments[n];return(t=e.call.apply(e,[this].concat(p))||this).playerInfo=void 0,t.pauseAnimation=void 0,t.resumeFlag=!1,t}t(n,e);var i=n.prototype;return i.start=function(){this.setAvatarBox(),this.pausePopupInit(),this.settlePopupInit(),this.pauseAnimation=s("pause_popup",this.node).getComponent(a)},i.update=function(e){C.instance.isActionJustPressed(v.act_pause_resume)&&(m.isPlaying()?this.onClickPauseButton():this.onClickResumeButton())},i.setScore=function(e){s("score_box/score",this.node).getComponent(u).string=e.toString()},i.pausePopupInit=function(){var e=this;s("pause_popup",this.node).active=!1,r.load("popup/"+this.playerInfo.name+"_popup/spriteFrame",c,(function(t,o){s("pause_popup/popup/Sprite",e.node).getComponent(l).spriteFrame=o,s("pause_popup/popup",e.node).active=!0,s("pause_popup/count_down",e.node).active=!1}))},i.pausePopupShow=function(){s("pause_popup",this.node).active=!0,s("pause_popup/popup",this.node).active=!0,s("pause_popup/count_down",this.node).active=!1,this.pauseAnimation.play("popup_show")},i.pausePopupHide=function(){s("pause_popup",this.node).active=!1,s("pause_popup/popup",this.node).active=!1,s("pause_popup/count_down",this.node).active=!1},i.settlePopupInit=function(){s("settle_popup",this.node).active=!1},i.settlePopupShow=function(){var e=o(p().mark((function e(t,o,n,i,a,r){var c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s("settle_popup/popup/score",this.node).getComponent(u).string=" "+t.toString()+" ",s("settle_popup/popup/box/text",this.node).getComponent(u).string=n,e.next=4,f("avatar/"+this.playerInfo.name+"/"+o);case 4:c=e.sent,s("settle_popup/popup/box/avatar",this.node).getComponent(l).spriteFrame=c,s("settle_popup/popup/score/best_record",this.node).active=r,i>0?(s("settle_popup/popup/tip",this.node).getComponent(g).string="<color=#5E6368><size=20>シロコモードの解放まであと</size></color> <color=#007EFF><size=26>"+i+"</size></color> <color=#5E6368><size=20>点</size></color>",s("settle_popup/popup/popup_deck",this.node).active=!1,s("settle_popup/popup/tip",this.node).active=!0):a?(s("settle_popup/popup/tip",this.node).getComponent(g).string="<color=#5E6368><size=20>シロコモードが解放されました！</size></color>",s("settle_popup/popup/popup_deck",this.node).active=!1,s("settle_popup/popup/tip",this.node).active=!0):(s("settle_popup/popup/popup_deck",this.node).active=!0,s("settle_popup/popup/tip",this.node).active=!1),s("settle_popup",this.node).active=!0;case 9:case"end":return e.stop()}}),e,this)})));return function(t,o,p,n,i,s){return e.apply(this,arguments)}}(),i.onClickPauseButton=function(){m.getAudioManager().beep("sfx_click"),m.pause(),this.pausePopupShow()},i.onClickResumeButton=function(){this.resumeFlag||(this.resumeFlag=!0,m.getAudioManager().beep("sfx_click"),s("pause_popup/popup",this.node).active=!1,s("pause_popup/count_down",this.node).active=!0,this.getComponent(a).play("count_down"),m.getAudioManager().beep("sfx_countdown"),this.schedule((function(){m.getAudioManager().beep("sfx_countdown")}),1,1))},i.onCountDownAnimationComplete=function(){this.pausePopupHide(),m.resume(),this.resumeFlag=!1},i.onClickRestartButton=function(){m.getAudioManager().beep("sfx_click"),d.stopAll(),m.startGame(),m.getAudioManager().playMusic("music_playing_bgm",!0,.5)},i.onClickExitButton=function(){m.getAudioManager().beep("sfx_click"),d.stopAll(),h.loadScene("start")},i.onClickShareButton=function(){m.getAudioManager().beep("sfx_click"),window.open("https://twitter.com/intent/tweet?url="+encodeURIComponent("https://bluearchive.jp/kourintaisai/game01\n\n")+"&text="+encodeURIComponent("トレーニングのスコアは……"+m.getPlayerScore()+"点！\n\nスミレさんとシロコさんのトレーニングを手伝い、一緒にキヴォトス大運動会「晄輪大祭」を盛り上げましょう！\n▼期間限定ミニゲーム\n\n")+"&hashtags="+encodeURIComponent("ブルアカ\n,晄輪大祭"),"_blank")},i.setAvatarBox=function(){var e=this;this.playerInfo=y.getPlayerInfo(m.getPlayerRole()),s("avatar_box/icon_name/label",this.node).getComponent(u).string=this.playerInfo.nickname,r.load("avatar/"+this.playerInfo.name+"/"+this.playerInfo.name+"1/spriteFrame",c,(function(t,o){s("avatar_box/icon_avatar/avatar",e.node).getComponent(l).spriteFrame=o}))},n}(_))||x);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});