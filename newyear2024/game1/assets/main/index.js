function getCookie(cname){var name = cname + "=", ca = document.cookie.split(';'); for(var i=0; i<ca.length; i++){var c = ca[i].trim(); if (c.indexOf(name)==0) return c.substring(name.length,c.length);}return "";}function setCookie(cname,cvalue){document.cookie = cname + "=" + cvalue + "; expires=Infinity";}window.__require=function e(t,o,n){function r(c,a){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var l=o[c]={exports:{}};t[c][0].call(l.exports,function(e){return r(t[c][1][e]||e)},l,l.exports,e,t,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({Api:[function(e,t,o){"use strict";cc._RF.push(t,"bdda4EpyVNHbLRiCoxw5t9n","Api");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Api=void 0;var r=cc._decorator,i=r.ccclass,c=(r.property,function(){function e(){}var t;return t=e,e.loadServer=function(e){var o=window.location.href;o.indexOf("?")>-1&&(o=o.split("?")[0]),o.indexOf("index.html")>-1&&(o=o.replace("index.html",""));var n=o+"server.json";cc.loader.load({url:n},function(o,n){if(n){var r=n;t.SECRET_KEY=r.secret,t.API1=r.api_server_auth_url,t.API2=r.api_server_url,t.updateApi(),e&&e()}})},e.updateApi=function(){t.API_START_GAME=t.API2+"open/",t.API_REWARD=t.API2+"save/reward/",t.API_SAVE=t.API2+"save/",t.API_TODAY=t.API2+"today.",t.API_USER_INFO=t.API1+"./info.json",t.API_SEND_AWARD=t.API1+"/webview/api/open/send-award"},e.SECRET_KEY="6ceb308e1748cd4f3f5fcb0da801c92c6e3a5f88194da01f5e27eebc80efbce5",e.API1="https://test-web.bluearchive-cn.com",e.API2="http://123.56.147.134:52152/",e.API_START_GAME=t.API2+"open/",e.API_REWARD=t.API2+"save/reward/",e.API_SAVE=t.API2+"save/",e.API_TODAY=t.API2+"today.",e.API_USER_INFO=t.API1+"./info.json",e.API_SEND_AWARD=t.API1+"/webview/api/open/send-award",t=n([i],e)}());o.Api=c,cc._RF.pop()},{}],App:[function(e,t,o){"use strict";cc._RF.push(t,"14210rWfvVEUqh1S3RsyDz3","App");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function c(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./com/enum/AudioEnum"),u=e("./com/game/Api"),l=e("./com/game/Model"),p=e("./com/uitls/Http"),f=e("./com/uitls/Util"),d=cc._decorator,h=d.ccclass,y=d.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_rule=null,t.btn_start=null,t.label_score=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){return c(this,void 0,Promise,function(){var e,t,n=this;return a(this,function(){return e=window.location.href,t="",e.indexOf("data=")>-1&&(t=e.split("=")[1]),o.isDebug=!1,l.GameModel.auth=t,u.Api.loadServer(function(){return c(n,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:return l.GameModel.key=u.Api.SECRET_KEY,this.node_rule.active=!1,[4,f.Util.loadBundleRes()];case 1:return t.sent(),f.Util.playMusic(s.AudioEnum.home),this.sendUserInfo(function(t){t&&e.getToDay()}),[2]}})})}),[2]})})},t.prototype.getToDay=function(){var e=this;p.default.httpGet(u.Api.API_TODAY,0,function(t){console.log("start game :",t),l.GameModel.userInfo.maxDay=t.maxDay,l.GameModel.userInfo.maxScore=getCookie("maxScore"),l.GameModel.userInfo.todayHasReward=t.todayHasReward,l.GameModel.userInfo.serverTime=t.serverTime,l.GameModel.userInfo.rewardCount=t.rewardCount;var o=getCookie("maxScore")?getCookie("maxScore"):0;e.label_score.string=o+""})},t.prototype.onStartGame=function(){this.sendStartGame(),cc.director.loadScene("Game",function(){cc.audioEngine.stopAll()})},t.prototype.onClickBack=function(){var e="javascript:history.go(-1)";cc.sys.isBrowser?window.location.href=e:cc.sys.openURL(e)},t.prototype.onClickClose=function(){var e="javascript:window.close()";cc.sys.isBrowser?window.location.href=e:cc.sys.openURL(e)},t.prototype.onOpenRules=function(){this.node_rule.active=!this.node_rule.active},t.prototype.sendStartGame=function(){p.default.httpGet(u.Api.API_START_GAME,0,function(){})},t.prototype.sendUserInfo=function(e){p.default.httpGet(u.Api.API_USER_INFO,1,function(t){console.log(t);var o=t.meta;if(o&&o.succ){var n=t.payload.uid;l.GameModel.uid=n,e(!0)}else e(!1)},!0)},t.isDebug=!1,i([y(cc.Node)],t.prototype,"node_rule",void 0),i([y(cc.Node)],t.prototype,"btn_start",void 0),i([y(cc.Label)],t.prototype,"label_score",void 0),o=i([h],t)}(cc.Component);o.default=v,cc._RF.pop()},{"./com/enum/AudioEnum":"AudioEnum","./com/game/Api":"Api","./com/game/Model":"Model","./com/uitls/Http":"Http","./com/uitls/Util":"Util"}],ArrayUtil:[function(e,t,o){"use strict";cc._RF.push(t,"548f3In4OlPpIjFki9+xjG2","ArrayUtil");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],c=0,a=i.length;c<a;c++,r++)n[r]=i[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(){}return e.clone=function(t){var o=Object.prototype.toString.call(t).slice(8,-1).toLowerCase();if("object"==o){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e.clone(t[r]));return n}if("array"==o){for(var i=[],c=0;c<t.length;c++)i[c]=e.clone(t[c]);return i}return t},e.copy2DArray=function(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o].concat());return t},e.fisherYatesShuffle=function(e){for(var t=e.length;t;){var o=Math.floor(Math.random()*t--),n=e[t];e[t]=e[o],e[o]=n}return e},e.confound=function(e){return e.slice().sort(function(){return Math.random()-.5})},e.flattening=function(e){for(;e.some(function(e){return Array.isArray(e)});)e=[].concat.apply([],e);return e},e.removeRepeated=function(e){var t=[];return e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t},e.combineArrays=function(e,t){return n(e,t)},e.getRandomValueInArray=function(e){return e[Math.floor(Math.random()*e.length)]},e}();o.default=r,cc._RF.pop()},{}],AudioEnum:[function(e,t,o){"use strict";cc._RF.push(t,"f78d72CX+JEzpRU8d8E/ooG","AudioEnum"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioEnum=void 0,function(e){e.carrot="carrot",e.redpacket="redpacket",e.home="home",e.game="game",e.score="score",e.all_button="all_button"}(o.AudioEnum||(o.AudioEnum={})),cc._RF.pop()},{}],Award:[function(e,t,o){"use strict";cc._RF.push(t,"462d76KqYJNt4QP7xU0Sfx/","Award");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function c(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../enum/AudioEnum"),u=e("../enum/EventEnum"),l=e("../event/EventDispatcher"),p=e("../uitls/Http"),f=e("../uitls/SpriteFrameCache"),d=e("../uitls/Util"),h=e("./Api"),y=e("./Model"),v=cc._decorator,m=v.ccclass,_=v.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_score=null,t.node_states=[],t.node_states1=[],t.node_error=null,t.lable_error=null,t.spt_icon=null,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.open=function(){return c(this,void 0,void 0,function(){var e,t=this;return a(this,function(){return this.node_error.active=!1,this.awardState(-1),this.node.active=!0,this.label_score.string=y.GameModel.score.toString(),cc.audioEngine.stopMusic(),d.Util.playMusic(s.AudioEnum.score),y.GameModel.userInfo.rewardCount,(e={}).score=y.GameModel.score,e.authorization=y.GameModel.auth,p.default.httpPost(h.Api.API_SAVE,e,function(e){return c(t,void 0,void 0,function(){var t,o,n,r,i,c,s,u;return a(this,function(a){switch(a.label){case 0:return console.log("game save score:",e),setCookie("maxScore",this.label_score.string),t=e.meta,o=e.todayInfo,t?(n=t.error)&&n.length>0?(r=n[0],i=r.code,c="\u51fa\u73b0\u9519\u8bef\uff08"+i+"\u9519\u8bef\u7801\uff09\uff0c\u5982\u6709\u95ee\u9898\u8bf7\u54a8\u8be2\u5ba2\u670d",this.node_error.active=!0,this.lable_error.string=c,[2]):o?(y.GameModel.userInfo.rewardCount=o.rewardCount,y.GameModel.userInfo.todayHasReward=o.todayHasReward,s=this.spt_icon,[4,f.default.instance.getSpriteFrame("icon/"+o.rewardCount)]):[3,2]:[3,3];case 1:s.spriteFrame=a.sent(),o.todayHasReward&&(this.node_states1[0].active=!0,this.node_states1[1].active=!1,this.awardState(0)),a.label=2;case 2:return[3,5];case 3:return o.rewardCount>=7?(this.awardState(1),[2]):o.todayHasReward?(u=this.spt_icon,[4,f.default.instance.getSpriteFrame("icon/get/"+o.rewardCount)]):[3,5];case 4:u.spriteFrame=a.sent(),this.node_states1[0].active=!1,this.node_states1[1].active=!0,this.awardState(0),a.label=5;case 5:return[2]}})})}),[2]})})},t.prototype.onReset=function(){this.node.active=!1,y.GameModel.clear(),y.GameModel.gameType=!0,cc.audioEngine.stopMusic(),d.Util.playMusic(s.AudioEnum.game),l.EventManager.emit(u.EventEnum.GAME_RESET)},t.prototype.onBack=function(){cc.director.loadScene("App",function(){cc.audioEngine.stopAll()})},t.prototype.getReward=function(){p.default.httpGet(h.Api.API_REWARD,0,function(e){console.log("game get reward:",e)})},t.prototype.awardState=function(e){this.node_states.forEach(function(t,o){t.active=!1,o==e&&(t.active=!0)})},i([_(cc.Label)],t.prototype,"label_score",void 0),i([_([cc.Node])],t.prototype,"node_states",void 0),i([_([cc.Node])],t.prototype,"node_states1",void 0),i([_(cc.Node)],t.prototype,"node_error",void 0),i([_(cc.Label)],t.prototype,"lable_error",void 0),i([_(cc.Sprite)],t.prototype,"spt_icon",void 0),i([m],t)}(cc.Component);o.default=E,cc._RF.pop()},{"../enum/AudioEnum":"AudioEnum","../enum/EventEnum":"EventEnum","../event/EventDispatcher":"EventDispatcher","../uitls/Http":"Http","../uitls/SpriteFrameCache":"SpriteFrameCache","../uitls/Util":"Util","./Api":"Api","./Model":"Model"}],Base64:[function(e,t,o){"use strict";cc._RF.push(t,"5980dCn3pxEWILC5R/caJoM","Base64"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return e.prototype.encode=function(e){var t,o,n,r,i,c,a,s="",u=0;for(e=this._utf8_encode(e);u<e.length;)r=(t=e.charCodeAt(u++))>>2,i=(3&t)<<4|(o=e.charCodeAt(u++))>>4,c=(15&o)<<2|(n=e.charCodeAt(u++))>>6,a=63&n,isNaN(o)?c=a=64:isNaN(n)&&(a=64),s=s+this._keyStr.charAt(r)+this._keyStr.charAt(i)+this._keyStr.charAt(c)+this._keyStr.charAt(a);return s},e.prototype.decode=function(e){var t,o,n,r,i,c,a="",s=0;for(e=e.replace(/[^A-Za-z0-9]/g,"");s<e.length;)t=this._keyStr.indexOf(e.charAt(s++))<<2|(r=this._keyStr.indexOf(e.charAt(s++)))>>4,o=(15&r)<<4|(i=this._keyStr.indexOf(e.charAt(s++)))>>2,n=(3&i)<<6|(c=this._keyStr.indexOf(e.charAt(s++))),a+=String.fromCharCode(t),64!=i&&(a+=String.fromCharCode(o)),64!=c&&(a+=String.fromCharCode(n));return this._utf8_decode(a)},e.prototype._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},e.prototype._utf8_decode=function(e){for(var t="",o=0,n=0,r=0,i=0;o<e.length;)(n=e.charCodeAt(o))<128?(t+=String.fromCharCode(n),o++):n>191&&n<224?(r=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&r),o+=2):(r=e.charCodeAt(o+1),i=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&r)<<6|63&i),o+=3);return t},e}();o.default=new n,cc._RF.pop()},{}],ButtonMusic:[function(e,t,o){"use strict";cc._RF.push(t,"8d39e5aSBlNoo8Al8OyQ/Tl","ButtonMusic");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../enum/AudioEnum"),a=e("../uitls/Util"),s=cc._decorator,u=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.on=null,t.off=null,t}var o;return r(t,e),o=t,t.prototype.start=function(){this.on.active=o._isMusciState,this.off.active=!o._isMusciState},t.prototype.onClick=function(){o._isMusciState=!o._isMusciState,this.on.active=o._isMusciState,this.off.active=!this.on.active,"App"==cc.director.getScene().name?o._isMusciState?a.Util.playMusic(c.AudioEnum.home):cc.audioEngine.stopMusic():"Game"==cc.director.getScene().name&&(o._isMusciState?a.Util.playMusic(c.AudioEnum.game):cc.audioEngine.stopMusic())},t.MusciState=function(){return o._isMusciState},t._isMusciState=!0,i([l(cc.Node)],t.prototype,"on",void 0),i([l(cc.Node)],t.prototype,"off",void 0),o=i([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../enum/AudioEnum":"AudioEnum","../uitls/Util":"Util"}],ButtonScaleEffect:[function(e,t,o){"use strict";cc._RF.push(t,"eb5b7yUCN9POKAtvq9MC1Xb","ButtonScaleEffect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){var e=cc.tween().to(.3,{scale:1.2*this.node.scale}).to(.3,{scale:this.node.scale}).to(.3,{scale:1.2*this.node.scale}).to(.3,{scale:this.node.scale}).delay(.5);cc.tween(this.node).then(e).repeatForever().start()},i([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],ClickAudio:[function(e,t,o){"use strict";cc._RF.push(t,"a1177hvMY1MpbbAZU8ELcM6","ClickAudio");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../enum/AudioEnum"),a=e("../uitls/Util"),s=cc._decorator,u=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.elastic=!1,t._oldScale=1,t}return r(t,e),t.prototype.anim2=function(){var e=cc.scaleBy(.6,.9,.9).easing(cc.easeElasticOut(.3));this.node.runAction(e)},t.prototype.anim2back=function(){var e=cc.scaleTo(.6,this._oldScale,this._oldScale).easing(cc.easeElasticOut(.3));this.node.runAction(e)},t.prototype.onLoad=function(){var e=this;if(this.elastic){var t=this.getComponent(cc.Button);t.transition=cc.Button.Transition.COLOR,t.normalColor=cc.Color.WHITE,t.pressedColor=new cc.Color(200,200,200),this._oldScale=this.node.scale}this.node.on("touchstart",function(){e.elastic&&e.anim2()},this.node),this.node.on("touchend",function(){a.Util.playEffect(c.AudioEnum.all_button),e.elastic&&e.anim2back()}),this.node.on("touchcancel",function(){e.elastic&&e.anim2back()})},i([l],t.prototype,"elastic",void 0),i([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../enum/AudioEnum":"AudioEnum","../uitls/Util":"Util"}],EventDispatcher:[function(e,t,o){"use strict";cc._RF.push(t,"29f2cfz8cNNbp9IxEP4bbJq","EventDispatcher"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventManager=void 0;var n=e("../uitls/TSMap"),r=e("./EventList"),i=function(){function e(){this.eventMap=new n.default}return e.prototype.on=function(e,t,o){void 0===e&&(e="");var n=this.eventMap.get(e);n?this.has(e,t,o)||n.on(t,o):(n=new r.default,this.eventMap.set(e,n),n.on(t,o)),n.size()>20&&console.warn(" EventDispatcher on  is too long ",n.size(),e)},e.prototype.has=function(e,t,o){var n=this.eventMap.get(e);return!!n&&n.has(t,o)>=0},e.prototype.off=function(e,t,o){var n=this.eventMap.get(e);n&&n.off(t,o)},e.prototype.emit=function(e,t,o,n){var r=this.eventMap.get(e);r&&r.emit(t,o,n)},e.prototype.offAll=function(){this.eventMap.clear()},e.prototype.offByName=function(e){var t=this.eventMap.get(e);t&&t.offAll()},e}();o.default=i,o.EventManager=new i,cc._RF.pop()},{"../uitls/TSMap":"TSMap","./EventList":"EventList"}],EventEnum:[function(e,t,o){"use strict";cc._RF.push(t,"02fd7LTpTZNco1L2cYX0FEY","EventEnum"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventEnum=void 0,function(e){e.GAME_START="GAME_START",e.PUT_NODE="PUT_NODE",e.TIME_EVENT="TIME_EVENT",e.SCORE_ADD="SCORE_ADD",e.DOWN_TIME="DOWN_TIME",e.LOWER_HP="LOWER_HP",e.LUCKY_ADD="LUCKY_ADD",e.TIME_CHANGE="TIME_CHANGE",e.DOUBLE_TIME="DOUBLE_TIME",e.DOUBLE_END="DOUBLE_END",e.GAME_OVER="GAME_OVER",e.GAME_RESET="GAME_RESET",e.GAME_CONTINUE="GAME_CONTINUE"}(o.EventEnum||(o.EventEnum={})),cc._RF.pop()},{}],EventList:[function(e,t,o){"use strict";cc._RF.push(t,"72f8dUHuQJNE7/CqcRlDuNY","EventList"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.list=[]}return e.prototype.on=function(e,t){this.list.push({handler:e,target:t})},e.prototype.has=function(e,t){for(var o=0;o<this.list.length;o++){var n=this.list[o];if(n.handler===e&&n.target===t)return o}return-1},e.prototype.size=function(){return this.list.length},e.prototype.off=function(e,t){for(var o=0;o<this.list.length;o++){var n=this.list[o];if(n.handler===e&&n.target===t)return void this.list.splice(o,1)}},e.prototype.emit=function(e,t,o){this.list.forEach(function(n){n.handler.call(n.target,e,t,o)})},e.prototype.offAll=function(){this.list.length=0},e}();o.default=n,cc._RF.pop()},{}],Event:[function(e,t,o){"use strict";cc._RF.push(t,"632dcIqOVtJTrM45X0fNNKZ","Event"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.VIEW_RESIZE="VIEW_RESIZE",e}();o.default=n,cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"8a2a26iEblCO5EJvQJ/ettx","Game");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./com/enum/AudioEnum"),a=e("./com/enum/EventEnum"),s=e("./com/event/EventDispatcher"),u=e("./com/game/Award"),l=e("./com/game/Model"),p=e("./com/game/Role"),f=e("./com/uitls/Util"),d=cc._decorator,h=d.ccclass,y=d.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_pause=null,t.node_award=null,t.anim_timer=null,t.node_role=null,t.node_layer=null,t.node_left=null,t.node_right=null,t.isLeft=!1,t.isRight=!1,t}return r(t,e),t.prototype.onLoad=function(){l.GameModel.clear(),s.EventManager.on(a.EventEnum.GAME_OVER,this.onGameOver,this),s.EventManager.on(a.EventEnum.GAME_CONTINUE,this.onGameContinue,this),this.node_layer.on(cc.Node.EventType.TOUCH_START,this.onTouchLeftStart,this),this.node_layer.on(cc.Node.EventType.TOUCH_END,this.onTouchLeftEnd,this),this.node_layer.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchLeftEnd,this)},t.prototype.update=function(){this.isLeft?this.node_role.getComponent(p.default)._downMove("left"):this.isRight&&this.node_role.getComponent(p.default)._downMove("right")},t.prototype.start=function(){f.Util.playMusic(c.AudioEnum.game),this.anim_timer.node.active=!1},t.prototype.onGamePause=function(){this.node_pause.active=!0,l.GameModel.gameType=!1},t.prototype.onBack=function(){cc.director.loadScene("App",function(){cc.audioEngine.stopAll()})},t.prototype.onGameOver=function(){this.node_award.getComponent(u.default).open()},t.prototype.onGameContinue=function(){var e=this;this.anim_timer.node.active=!0,this.anim_timer.on(cc.Animation.EventType.FINISHED,function(){e.anim_timer.node.active=!1,l.GameModel.gameType=!0,s.EventManager.emit(a.EventEnum.GAME_START)},this),this.anim_timer.play("timer")},t.prototype.onTouchLeftStart=function(e){cc.v3(e.getLocation().x-.5*this.node_layer.width,e.getLocation().y-.5*this.node_layer.height,0).x-this.node_role.x>0?(this.isLeft=!1,this.isRight=!0):(this.isRight=!1,this.isLeft=!0)},t.prototype.onTouchLeftEnd=function(){this.isRight=!1,this.isLeft=!1},t.prototype.onDestroy=function(){s.EventManager.offAll()},i([y(cc.Node)],t.prototype,"node_pause",void 0),i([y(cc.Node)],t.prototype,"node_award",void 0),i([y(cc.Animation)],t.prototype,"anim_timer",void 0),i([y(cc.Node)],t.prototype,"node_role",void 0),i([y(cc.Node)],t.prototype,"node_layer",void 0),i([y(cc.Node)],t.prototype,"node_left",void 0),i([y(cc.Node)],t.prototype,"node_right",void 0),i([h],t)}(cc.Component);o.default=v,cc._RF.pop()},{"./com/enum/AudioEnum":"AudioEnum","./com/enum/EventEnum":"EventEnum","./com/event/EventDispatcher":"EventDispatcher","./com/game/Award":"Award","./com/game/Model":"Model","./com/game/Role":"Role","./com/uitls/Util":"Util"}],Http:[function(e,t,o){"use strict";cc._RF.push(t,"ac946Yo+KpI8ZNXOHlmmr0w","Http");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function c(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../game/Model"),c=e("./Util"),a=function(){function e(){this.Code={Error:0,Success:1,Timeout:2}}return e.httpGet=function(e,t,o,n){void 0===t&&(t=0),void 0===o&&(o=null),void 0===n&&(n=!1),0==t&&(e+=i.GameModel.uid);var r=cc.loader.getXMLHttpRequest();r.onreadystatechange=function(){if(cc.log("get xhr.readyState:"+r.readyState+" xhr.status:"+r.status),4===r.readyState&&200==r.status)try{var e=r.responseText,t=JSON.parse(e);o(t)}catch(n){o(r.responseText)}else 4===r.readyState&&401==r.status&&o({status:401})},r.open("GET",e,!0),cc.sys.isNative?r.setRequestHeader("Accept-Encoding","gzip,deflate"):(r.setRequestHeader("Content-Type","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"),n&&(r.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"),r.setRequestHeader("Authorization",i.GameModel.auth))),r.timeout=5e3,r.send()},e.httpPost=function(e,t,o,a,s){return void 0===o&&(o=null),void 0===a&&(a=0),void 0===s&&(s=!1),n(this,void 0,void 0,function(){var u,l,p,f;return r(this,function(){return 0==a&&(e+=i.GameModel.uid),u=cc.loader.getXMLHttpRequest(),l=!1,p=setTimeout(function(){l=!0,u.abort(),o(-1)},5e3),u.onreadystatechange=function(){return n(this,void 0,void 0,function(){var e;return r(this,function(){return l?[2]:(4===u.readyState&&(200===u.status?(e=u.responseText,(e=JSON.parse(e))&&(0!=e.code&&(e.msg||"",e.code),o(e)),clearTimeout(p)):u.status>=400?(clearTimeout(p),o(o({status:-1}))):0===u.status&&(clearTimeout(p),o(o({status:-1})))),[2])})})},u.open("POST",e,!0),cc.sys.isNative?u.setRequestHeader("Accept-Encoding","gzip,deflate"):s?(f=c.Util.getHmacSHA256(t,i.GameModel.key),u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("X-Signature",f),u.setRequestHeader("Authorization",i.GameModel.auth)):u.setRequestHeader("Content-Type","application/json"),u.timeout=5e3,t=JSON.stringify(t),u.send(t),[2]})})},e.getHttpContent=function(e){var t="";for(var o in e)e.hasOwnProperty(o)&&(""===t||(t+="&"),t=t+o+"="+e[o]);return t},e}();o.default=a,cc._RF.pop()},{"../game/Model":"Model","./Util":"Util"}],ItemLayer:[function(e,t,o){"use strict";cc._RF.push(t,"579c852ukFF9qrBVVsBS35k","ItemLayer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemList=void 0;var c=e("../enum/EventEnum"),a=e("../event/EventDispatcher"),s=e("../uitls/ArrayUtil"),u=e("../uitls/PoolManager"),l=e("../uitls/Util"),p=e("./Item"),f=e("./Model");o.ItemList=[{name:"item100",prop:6e3},{name:"item300",prop:4e3},{name:"item500",prop:3e3},{name:"itemDeBuff",prop:2e3},{name:"itemBuff",prop:1e3}];var d=cc._decorator,h=d.ccclass,y=d.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item100Prefab=null,t.item300Prefab=null,t.item500Prefab=null,t.itemDeBuffPrefab=null,t.itemBuffPrefab=null,t._itemList=[],t._y=450,t.pool=null,t.isDouble=!1,t}return r(t,e),t.prototype.onLoad=function(){a.EventManager.on(c.EventEnum.GAME_START,this.onGameStart,this),a.EventManager.on(c.EventEnum.GAME_RESET,this.onResetGame,this),a.EventManager.on(c.EventEnum.PUT_NODE,this.onPutNode,this),a.EventManager.on(c.EventEnum.DOUBLE_TIME,this.onDoubleTime,this),a.EventManager.on(c.EventEnum.TIME_CHANGE,this.onTimeChange,this),this.pool=new u.default(this.node,this.onCreateObject,this),this.pool.onRecycleSignal.add(this.onRecycleObject,this);var e=cc.director.getCollisionManager();e.enabled=!0,e.enabledDrawBoundingBox=!1,e.enabledDebugDraw=!1,this._itemList=s.default.clone(o.ItemList),this.onGameStart()},t.prototype.onDestroy=function(){this.pool.clear(),this.unscheduleAllCallbacks()},t.prototype.onPutNode=function(e){e.removeFromParent(!0)},t.prototype.onRecycleObject=function(){},t.prototype.onCreateObject=function(e){return cc.instantiate(e)},t.prototype.onTimeChange=function(){this.unschedule(this.runGame),this.onGameStart()},t.prototype.onGameStart=function(){this.pool.clear();var e=f.GameModel.downTime;this.schedule(this.runGame,e)},t.prototype.onResetGame=function(){this.pool.clear(),this.node.removeAllChildren(),this.onGameStart()},t.prototype.onDoubleTime=function(){this.isDouble=!0,this._itemList.pop();var e=function(){f.GameModel.doubleTime--,f.GameModel.doubleTime<=0&&(this.isDouble=!1,f.GameModel.doubleTime=0,this._itemList=s.default.clone(o.ItemList),a.EventManager.emit(c.EventEnum.DOUBLE_END),this.unschedule(e))}.bind(this);this.schedule(e,1)},t.prototype.runGame=function(){f.GameModel.gameType||this.unschedule(this.runGame);var e=l.Util.slotItem(this._itemList);if(e){var t=e.name;if(this.pool){var o=this.pool.get(this[t+"Prefab"]);o&&(o.getComponent(p.default).init(this.isDouble),o.y=this._y+o.height/2,o.x=l.Util.randNum(-cc.winSize.width/2+100,cc.winSize.width/2-100)+o.width/2,o.parent=this.node)}}},i([y({tooltip:"100\u5206\u9053\u5177",type:cc.Prefab})],t.prototype,"item100Prefab",void 0),i([y({tooltip:"300\u5206\u9053\u5177",type:cc.Prefab})],t.prototype,"item300Prefab",void 0),i([y({tooltip:"500\u5206\u9053\u5177",type:cc.Prefab})],t.prototype,"item500Prefab",void 0),i([y({tooltip:"debuff\u9053\u5177",type:cc.Prefab})],t.prototype,"itemDeBuffPrefab",void 0),i([y({tooltip:"buff\u9053\u5177",type:cc.Prefab})],t.prototype,"itemBuffPrefab",void 0),i([h],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../enum/EventEnum":"EventEnum","../event/EventDispatcher":"EventDispatcher","../uitls/ArrayUtil":"ArrayUtil","../uitls/PoolManager":"PoolManager","../uitls/Util":"Util","./Item":"Item","./Model":"Model"}],Item:[function(e,t,o){"use strict";cc._RF.push(t,"054dcz0mM1DLb113TMLh2gH","Item");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../enum/AudioEnum"),a=e("../enum/EventEnum"),s=e("../event/EventDispatcher"),u=e("../uitls/Util"),l=e("./Model"),p=cc._decorator,f=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isCollision=!0,t.score=0,t.isDouble=!1,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e){this.isDouble=e,this.isCollision=!0},t.prototype.onCollisionEnter=function(e,t){if(this.node.y>0)return console.log("collider pos:",this.node.position.x,this.node.position.y),void(e.world.aabb.intersects(t.world.aabb)&&console.log("aabb"));if(this.isCollision){if(this.isCollision=!1,9999==this.score)l.GameModel.lucky+=1,u.Util.playEffect(c.AudioEnum.redpacket),s.EventManager.emit(a.EventEnum.LUCKY_ADD);else if(-9999==this.score)l.GameModel.hp-=1,s.EventManager.emit(a.EventEnum.LOWER_HP),u.Util.playEffect(c.AudioEnum.carrot);else{var o=this.score;this.isDouble&&(o*=2),l.GameModel.score+=o,s.EventManager.emit(a.EventEnum.SCORE_ADD,o),u.Util.playEffect(c.AudioEnum.redpacket)}s.EventManager.emit(a.EventEnum.PUT_NODE,this.node)}},t.prototype.update=function(e){if(l.GameModel.gameType){if(-450==this.node.y)return this.isCollision=!1,void s.EventManager.emit(a.EventEnum.PUT_NODE,this.node);var t=l.GameModel.speed;this.node.y-=e*t}},i([d({type:cc.Integer,tooltip:"\u79ef\u5206"})],t.prototype,"score",void 0),i([f],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../enum/AudioEnum":"AudioEnum","../enum/EventEnum":"EventEnum","../event/EventDispatcher":"EventDispatcher","../uitls/Util":"Util","./Model":"Model"}],Layer:[function(e,t,o){"use strict";cc._RF.push(t,"61a434IXWJFQKVipcSd5Rjb","Layer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../enum/EventEnum"),a=e("../event/EventDispatcher"),s=e("./Model"),u=cc._decorator,l=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hps=[],t.label_time=null,t.label_score=null,t.label_tips=null,t.spt_score_bg=null,t.spt_score_icon=null,t.label_double_time=null,t._double_time=0,t}return r(t,e),t.prototype.onLoad=function(){a.EventManager.on(c.EventEnum.SCORE_ADD,this.onUpdateScore,this),a.EventManager.on(c.EventEnum.LOWER_HP,this.onLowerHp,this),a.EventManager.on(c.EventEnum.GAME_RESET,this.onGameReset,this),a.EventManager.on(c.EventEnum.DOUBLE_TIME,this.onDoubleTimer,this),a.EventManager.on(c.EventEnum.DOUBLE_END,this.onDoubleEnd,this),this.startGame()},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},t.prototype.startGame=function(){var e=this;this.onDoubleEnd(),this.schedule(function(){s.GameModel.gameType&&(s.GameModel.gameTime--,s.GameModel.gameTime<=0&&(s.GameModel.gameType=!1,a.EventManager.emit(c.EventEnum.GAME_OVER,!0),s.GameModel.gameTime=0),e._double_time>0&&(e._double_time--,e.label_double_time.string=e._double_time.toString()),e.label_time.string=s.GameModel.gameTime.toString())},1)},t.prototype.onGameReset=function(){this.label_score.string="0",this.label_time.string=s.GameModel.gameTime.toString(),this.hps.forEach(function(e){e.active=!0})},t.prototype.onUpdateScore=function(){this.label_score.string=s.GameModel.score.toString()},t.prototype.onDoubleTimer=function(){this._double_time=20,this.label_time.node.color=new cc.Color(255,253,49);var e=this.label_time.node.addComponent(cc.LabelOutline);e.color=new cc.Color(255,115,105),e.width=2,this.label_score.node.color=new cc.Color(255,253,49),this.spt_score_bg.getChildByName("spt_score_bg2").active=!0,this.spt_score_icon.getChildByName("spt_score_icon2").active=!0,this.label_tips.active=!0},t.prototype.onDoubleEnd=function(){this._double_time=0,this.label_time.node.removeComponent(cc.LabelOutline),this.label_time.node.color=new cc.Color(255,255,255),this.label_score.node.color=new cc.Color(255,255,255),this.spt_score_bg.getChildByName("spt_score_bg2").active=!1,this.spt_score_icon.getChildByName("spt_score_icon2").active=!1,this.label_tips.active=!1},t.prototype.onLowerHp=function(){for(var e=this.hps.length-s.GameModel.hp,t=0;t<e;t++){var o=this.hps[t];o&&(o.active=!1)}0==s.GameModel.hp&&(s.GameModel.gameType=!1,a.EventManager.emit(c.EventEnum.GAME_OVER,!1))},i([p({type:[cc.Node],tooltip:"\u8840\u91cf"})],t.prototype,"hps",void 0),i([p({type:cc.Label,tooltip:"\u65f6\u95f4"})],t.prototype,"label_time",void 0),i([p({type:cc.Label,tooltip:"\u79ef\u5206\u663e\u793a"})],t.prototype,"label_score",void 0),i([p(cc.Node)],t.prototype,"label_tips",void 0),i([p(cc.Node)],t.prototype,"spt_score_bg",void 0),i([p(cc.Node)],t.prototype,"spt_score_icon",void 0),i([p({type:cc.Label,tooltip:"\u53cc\u500d\u65f6\u95f4"})],t.prototype,"label_double_time",void 0),i([l],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../enum/EventEnum":"EventEnum","../event/EventDispatcher":"EventDispatcher","./Model":"Model"}],LongPress:[function(e,t,o){"use strict";cc._RF.push(t,"2acc1SHxRNJ0a05xvLUva+2","LongPress");var n,r,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.TriggerWay=o.LONG_PRESS=void 0,o.LONG_PRESS="longpress",function(e){e[e.Immediately=1]="Immediately",e[e.AfterLoosing=2]="AfterLoosing"}(r=o.TriggerWay||(o.TriggerWay={}));var a=cc._decorator,s=a.ccclass,u=a.property,l=a.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trggerTime=2,t.trggerWay=r.Immediately,t.longPressEvents=[],t.hasAccomplished=!1,t}return i(t,e),t.prototype.onEnable=function(){this.registerNodeEvent()},t.prototype.onDisable=function(){this.unregisterNodeEvent()},t.prototype.registerNodeEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.unregisterNodeEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.onTouchStart=function(){this.hasAccomplished=!1,this.scheduleOnce(this.onPressAccomplished.bind(this),this.trggerTime)},t.prototype.onTouchEnd=function(){this.hasAccomplished&&(this.hasAccomplished=!1,this.trigger()),this.unscheduleAllCallbacks()},t.prototype.onTouchCancel=function(){this.hasAccomplished&&(this.hasAccomplished=!1,this.trigger()),this.unscheduleAllCallbacks()},t.prototype.onPressAccomplished=function(){this.trggerWay===r.Immediately?this.trigger():this.trggerWay===r.AfterLoosing&&(this.hasAccomplished=!0)},t.prototype.trigger=function(){cc.Component.EventHandler.emitEvents(this.longPressEvents,this),this.node.emit(o.LONG_PRESS,this)},c([u({tooltip:!1})],t.prototype,"trggerTime",void 0),c([u({type:cc.Enum(r),tooltip:!1})],t.prototype,"trggerWay",void 0),c([u({type:cc.Component.EventHandler,tooltip:!1})],t.prototype,"longPressEvents",void 0),c([s,l("\u957f\u6309\u7ec4\u4ef6/LongPress")],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],Model:[function(e,t,o){"use strict";cc._RF.push(t,"e34c7bhsCtDVqe3n71JFf+5","Model"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameModel=o.Model=void 0;var n=e("../enum/EventEnum"),r=e("../event/EventDispatcher"),i=function(){function e(){this.uid="",this.auth="",this.key="",this.userInfo={maxDay:0,maxScore:0,todayHasReward:!1,rewardCount:0,serverTime:Date.now()},this.gameTime=120,this.downTime=.5,this._score=0,this._lucky=0,this.doubleTime=0,this.hp=2,this._speed={defaultSpeed:150,speed:150},this._isGameType=!0}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e;var t=this.getDownTime(this._score);t!=this.downTime&&(this.downTime=t,console.log("\u6389\u843d\u65f6\u95f4\u53d8\u5316"),r.EventManager.emit(n.EventEnum.TIME_CHANGE));var o=this.getSpeedMultiple(this._score),i=this._speed.defaultSpeed*o;this._speed.speed=i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lucky",{get:function(){return this._lucky},set:function(e){this._lucky=e,this._lucky>=3&&(r.EventManager.emit(n.EventEnum.DOUBLE_TIME),this.doubleTime=20)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fallSpeed",{get:function(){return this._speed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed.speed},set:function(e){this._speed.speed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameType",{get:function(){return this._isGameType},set:function(e){this._isGameType=e},enumerable:!1,configurable:!0}),e.prototype.getSpeedMultiple=function(e){if(e>=12e3)return 3;for(var t=1,o=[1,1.5,2,2.3,2.5,3],n=[1e3,4e3,6e3,8e3,9e3,12e3],r=0;r<=n.length;r++)if(e<=n[r]){t=o[r];break}return t},e.prototype.getDownTime=function(e){if(e>=12e3)return.2;for(var t=.5,o=[.5,.45,.4,.35,.3,.2],n=[1e3,4e3,6e3,8e3,9e3,12e3],r=0;r<=n.length;r++)if(e<=n[r]){t=o[r];break}return t},e.prototype.clear=function(){this.speed=this._speed.defaultSpeed,this.lucky=0,this.score=0,this.downTime=.5,this.doubleTime=0,this.hp=2,this.gameType=!0,this.gameTime=120},e}();o.Model=i,o.GameModel=new i,cc._RF.pop()},{"../enum/EventEnum":"EventEnum","../event/EventDispatcher":"EventDispatcher"}],Pause:[function(e,t,o){"use strict";cc._RF.push(t,"a635be/wn1Cq69BXevqtlGm","Pause");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../enum/EventEnum"),a=e("../event/EventDispatcher"),s=e("./Model"),u=cc._decorator,l=u.ccclass,p=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){},t.prototype.onContinue=function(){this.node.active=!1,a.EventManager.emit(c.EventEnum.GAME_CONTINUE)},t.prototype.onReset=function(){this.node.active=!1,s.GameModel.clear(),s.GameModel.gameType=!0,a.EventManager.emit(c.EventEnum.GAME_RESET)},t.prototype.onBack=function(){cc.director.loadScene("App",function(){cc.audioEngine.stopAll()})},i([l],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../enum/EventEnum":"EventEnum","../event/EventDispatcher":"EventDispatcher","./Model":"Model"}],PoolManager:[function(e,t,o){"use strict";cc._RF.push(t,"b4de79t+ppJxZx9Xzm48tUk","PoolManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Signal"),r=function(){function e(e,t,o){this.nodePool={},this.nodes={},this.managed=!1,this.aliveObjects=[],this.onRecycleSignal=new n.default,this.onCreateObject=t,this.target=o,this.root=e,e&&e.on(cc.Node.EventType.CHILD_REMOVED,this.onNodeRemove,this)}return e.prototype.onNodeRemove=function(e){this.put(e),this.onRecycleSignal.fire(e)},e.prototype.objects=function(){return this.aliveObjects},e.prototype.clearAlives=function(){for(;0<this.aliveObjects.length;)this.aliveObjects[0].removeFromParent()},e.prototype.getPool=function(e){"object"==typeof e&&(e=e._uuid||e.name);var t=this.nodePool[e];return null==t&&(t=new cc.NodePool,this.nodePool[e]=t),t},e.prototype.get=function(e){var t=this.getPool(e).get();if(this.onCreateObject&&null==t){if(t=this.onCreateObject.call(this.target,e),this.root&&t.setParent(this.root),t||console.warn(t,"onCreateObject must return an object"),this.managed&&t&&this.aliveObjects.push(t),null==t)return;return this.nodes[t.uuid]=e,t}if(null!=t)return this.root&&t.setParent(this.root),this.managed&&this.aliveObjects.push(t),t},e.prototype.tag=function(e,t){this.nodes[e.uuid]=t},e.prototype.put=function(e,t){void 0===t&&(t=null),null==t&&(t=this.nodes[e.uuid]),this.getPool(t).put(e),this.managed&&this.aliveObjects.splice(this.aliveObjects.indexOf(e),1)},e.prototype.clear=function(e){if(this.managed&&this.aliveObjects.splice(0,this.aliveObjects.length),e)this.getPool(e).clear();else for(var t in this.nodePool)this.nodePool[t].clear()},e.prototype.size=function(e){return this.getPool(e).size()},e}();o.default=r,cc._RF.pop()},{"./Signal":"Signal"}],Role:[function(e,t,o){"use strict";cc._RF.push(t,"6250bSvZPFPVrePcZuMSQf2","Role");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.RoleEnum=void 0;var c,a=e("../enum/EventEnum"),s=e("../event/EventDispatcher"),u=e("./Model"),l=cc._decorator,p=l.ccclass,f=l.property;(function(e){e[e.default=0]="default",e[e.happy=1]="happy",e[e.weep=2]="weep"})(c=o.RoleEnum||(o.RoleEnum={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deltaK=1,t.xBoundary={left:0,right:0},t.role_state=[],t.node_lucky=null,t.label_score=null,t.lower_hp=null,t}return r(t,e),t.prototype.onLoad=function(){var e=cc.find("Canvas").width/2-this.node.width/2;this.xBoundary.left=-e,this.xBoundary.right=e,this.openTouch(),this.roleState(0),s.EventManager.on(a.EventEnum.LOWER_HP,this.onLowerHp,this),s.EventManager.on(a.EventEnum.LUCKY_ADD,this.onLuckyAdd,this),s.EventManager.on(a.EventEnum.GAME_RESET,this.onGameReset,this),s.EventManager.on(a.EventEnum.SCORE_ADD,this.onScoreAdd,this),s.EventManager.on(a.EventEnum.DOUBLE_TIME,this.onDoubleAdd,this)},t.prototype.openTouch=function(){},t.prototype.closeTouch=function(){},t.prototype._touchMove=function(e){if(u.GameModel.gameType){var t=e.getDelta(),o=this.deltaK*t.x,n=this.node.x+o;n<this.xBoundary.right&&n>this.xBoundary.left&&(this.node.x=n),this.roleState(c.default)}},t.prototype._downMove=function(e){if(u.GameModel.gameType){this.roleState(c.default);var t=this.node.position;if("right"==e){if(t.x<=Math.ceil(this.xBoundary.right))return void(this.node.x+=15)}else if(t.x>=Math.ceil(this.xBoundary.left))return void(this.node.x-=15)}},t.prototype.onLowerHp=function(){var e=this;this.playAnim(this.lower_hp),this.roleState(c.weep),this.scheduleOnce(function(){e.roleState(c.default)},.5)},t.prototype.onLuckyAdd=function(){var e=this;this.node_lucky.children.forEach(function(e){e.active=!1}),this.playLuckyAnim(this.node_lucky),this.roleState(c.happy),this.scheduleOnce(function(){e.roleState(c.default)},.5)},t.prototype.onDoubleAdd=function(){u.GameModel.lucky=0,this.node_lucky.children.forEach(function(e){e.active=!1});var e=this.node_lucky.getChildByName("spt_lucky_4");e&&(e.active=!0),this.playAnim(this.node_lucky)},t.prototype.onScoreAdd=function(e){var t=this;this.label_score.string="+"+e,this.playAnim(this.label_score.node),100==e?this.roleState(c.default):(this.roleState(c.happy),this.scheduleOnce(function(){t.roleState(c.default)},.5))},t.prototype.onGameReset=function(){this.node.x=0,this.roleState(c.default)},t.prototype.roleState=function(e){void 0===e&&(e=c.default),this.role_state.forEach(function(t,o){t.active=o==e})},t.prototype.playAnim=function(e,t){void 0===t&&(t=null);var o=cc.instantiate(e);o.parent=this.node,o.active=!0;var n=o.getComponent(cc.Animation);n&&(n.play(),n.on(cc.Animation.EventType.FINISHED,function(){n.stop(),o.removeFromParent(),t&&t()}))},t.prototype.playLuckyAnim=function(e,t){void 0===t&&(t=null);var o=cc.instantiate(e);o.parent=this.node,o.active=!0;var n=u.GameModel.lucky,r=o.getChildByName("spt_lucky_"+n);r&&(r.active=!0);var i=o.getComponent(cc.Animation);i&&(i.play(),i.on(cc.Animation.EventType.FINISHED,function(){i.stop(),o.removeFromParent(),t&&t()}))},i([f({type:cc.Integer,displayName:"Speed",tooltip:"1\u4e3a\u6b63\u5e38\u5f53\u4f60\u91c7\u75282\u65f6\uff0c\u62d6\u52a8\u901f\u5ea6\u4e3a2\u500d"})],t.prototype,"deltaK",void 0),i([f({type:[cc.Node],tooltip:"\u8868\u60c5"})],t.prototype,"role_state",void 0),i([f(cc.Node)],t.prototype,"node_lucky",void 0),i([f(cc.Label)],t.prototype,"label_score",void 0),i([f(cc.Node)],t.prototype,"lower_hp",void 0),i([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../enum/EventEnum":"EventEnum","../event/EventDispatcher":"EventDispatcher","./Model":"Model"}],Signal:[function(e,t,o){"use strict";cc._RF.push(t,"11f578uTopNVL9/zww1k9V8","Signal");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],c=0,a=i.length;c<a;c++,r++)n[r]=i[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(e,t){this.add(e,t)}return e.prototype.add=function(e,t){this.callback=e,this.target=t},e.prototype.fire=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];this.callback&&(e=this.callback).call.apply(e,n([this.target],t))},e.prototype.on=function(e,t){this.callback=e,this.target=t},e.prototype.clear=function(){this.callback=null},e}();o.default=r,cc._RF.pop()},{}],SpriteFrameCache:[function(e,t,o){"use strict";cc._RF.push(t,"3fd44wZ1GNEHIaSpEwQzjXl","SpriteFrameCache");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function c(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){this.frames={},this.atlas={}}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.getSpriteFrame=function(e){return n(this,void 0,Promise,function(){var t,o=this;return r(this,function(){return null==(t=this.frames[e])?[2,new Promise(function(n,r){cc.log("[SpriteFrameCache] request image:"+e),e&&""!=e?-1==e.indexOf("http")?cc.loader.loadRes(e,cc.SpriteFrame,function(t,i){t?r(t):i?(o.addSpriteFrame(e,i),n(i)):r("frameNull")}):cc.loader.load({url:e,type:"png"},function(i,c){i?r(i):c?(t=new cc.SpriteFrame(c),o.addSpriteFrame(e,t),n(t)):r("frameNull")}):r("empty-url")})]:[2,new Promise(function(e){return e(t)})]})})},e.prototype.addSpriteFrame=function(e,t){return this.frames[e]=t,t},e.prototype.addSpriteAtlas=function(e,t){return this.atlas[e]=t,t},e.prototype.getSpriteAtlas=function(e){return n(this,void 0,Promise,function(){var t,o=this;return r(this,function(){return null==(t=this.atlas[e])?[2,new Promise(function(t,n){cc.log("[SpriteFrameCache] request SpriteAtlas:"+e),e&&""!=e?cc.loader.loadRes(e,cc.SpriteAtlas,function(r,i){r?n(r):i?(o.addSpriteAtlas(e,i),t(i)):n("frameNull")}):n("empty-url")})]:[2,new Promise(function(e){return e(t)})]})})},e.prototype.getBundleSpriteAtlas=function(e,t){return n(this,void 0,void 0,function(){var o,n;return r(this,function(r){switch(r.label){case 0:return null!=(o=this.atlas[e+"_"+t])?[3,3]:[4,new Promise(function(t,o){cc.assetManager.loadBundle(e,function(e,n){e?(cc.log(e),o(e)):t(n)})})];case 1:return n=r.sent(),[4,new Promise(function(e,o){n.load(t,cc.SpriteAtlas,function(t,n){t?(cc.log(t),o(t)):e(n)})})];case 2:o=r.sent(),r.label=3;case 3:return[2,o]}})})},e.prototype.clear=function(){for(var e in this.frames){var t=this.frames[e];cc.loader.release(t),delete this.frames[e]}for(var e in this.atlas){var o=this.atlas[e];cc.loader.release(o),delete this.atlas[e]}},e.prototype.remove=function(e){var t=this.frames[e];cc.loader.release(t),delete this.frames[e]},e}();o.default=i,cc._RF.pop()},{}],TSMap:[function(e,t,o){"use strict";cc._RF.push(t,"87d85BzTXtHfLR/IiUN3neX","TSMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.value={},this.init()}return e.prototype.init=function(){this.value={},this.count=0},Object.defineProperty(e.prototype,"values",{get:function(){return this.value},enumerable:!1,configurable:!0}),e.prototype.getArray=function(){var e=[];for(var t in this.value)if(this.value.hasOwnProperty(t)){var o=this.value[t];e.push(o)}return e},e.prototype.forEach=function(e){for(var t in this.value)this.value.hasOwnProperty(t)&&e(t,this.value[t])},e.prototype.keySet=function(){var e=[];for(var t in this.value)e.push(t);return e},e.prototype.set=function(e,t){e=""+e,this.has(e)||this.count++,this.value[e]=t},e.prototype.put=function(e,t){e=""+e,this.set(e,t)},e.prototype.has=function(e){return e=""+e,null!=this.value[e]&&null!=this.value[e]},e.prototype.get=function(e){return e=""+e,this.value[e]},e.prototype.remove=function(e){return e=""+e,this.delete(e)},e.prototype.delete=function(e){e=""+e;var t=this.value[e];return this.value[e]=null,delete this.value[e],this.count--,t},e.prototype.release=function(){for(var e in this.value)this.value[e].release()},e.prototype.size=function(){return this.count},e.prototype.clear=function(){for(var e in this.value)this.delete(e)},e.prototype.add=function(e){var t=this;e.forEach(function(e,o){t.set(o,e)})},e}();o.default=n,cc._RF.pop()},{}],Util:[function(e,t,o){"use strict";cc._RF.push(t,"b3418akRnBCGKTHbj20nWr+","Util");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function c(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.Util=void 0;var i=e("../component/ButtonMusic"),c=function(){function e(){}return e.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(t);return null!=o?o[2]:null},e.getJson=function(e){return JSON.parse(e)},e.isJson=function(e){if("string"==typeof e)try{return!("object"!=typeof(e=JSON.parse(e))||!e)}catch(t){return!1}},e.randNum=function(e,t){void 0===e&&(e=-305),void 0===t&&(t=305);var o=e+Math.floor(t-e+1)*Math.random();return Math.floor(o)},e.initBtn=function(e,t,o){var n=this;void 0===o&&(o=!1);var r=cc.Node.EventType,i=r.TOUCH_START,c=r.TOUCH_END,a=r.TOUCH_CANCEL,s=e.scale;if(o)return e.once(i,function(){n.clickDownTween(s,e)},this),void e.once(c,function(){n.clickUpTween(s,e,t)},this);e.on(i,function(){n.clickDownTween(s,e)},this),e.on(c,function(){n.clickUpTween(s,e,t)},this),e.on(a,function(){n.clickUpTween(s,e,t)},this)},e.clickDownTween=function(e,t){t&&cc.tween(t).to(.1,{scale:e-.1}).start()},e.clickUpTween=function(e,t,o){t&&cc.tween(t).to(.1,{scale:e}).call(function(){o&&o()}).start()},e.animationBigLitZoom=function(e,t,o,n,r,i,c){void 0===t&&(t=0),void 0===o&&(o=.3),void 0===n&&(n=1.2),void 0===r&&(r=.1),void 0===i&&(i=1),e.active||(e.active=!0),e.scale=t,cc.tween(e).to(o,{scale:n}).to(r,{scale:i}).call(function(){c&&c()}).start()},e.loadBundleRes=function(){var e=this;return new Promise(function(t){cc.assetManager.loadBundle("resources",function(o,n){e.bundle=n,t(n)})})},e.loadBundleAudio=function(e){var t=this;return new Promise(function(o){t.bundle.load("/sound/"+e,cc.AudioClip,function(e,t){return o(t)})})},e.playEffect=function(e,t){return n(this,void 0,void 0,function(){var o,n;return r(this,function(r){switch(r.label){case 0:return(o=this.audioClipMap.get(e)||null)?[3,2]:[4,this.loadBundleAudio(e)];case 1:o=r.sent(),this.audioClipMap.set(e,o),r.label=2;case 2:return n=cc.audioEngine.playEffect(o,!1),cc.audioEngine.setVolume(n,1.5),t&&cc.audioEngine.setFinishCallback(n,function(){t()}),[2]}})})},e.playMusic=function(e,t){return n(this,void 0,void 0,function(){var o,n;return r(this,function(r){switch(r.label){case 0:return i.default.MusciState()?(o=this.audioClipMap.get(e)||null)?[3,2]:[4,this.loadBundleAudio(e)]:[2];case 1:o=r.sent(),this.audioClipMap.set(e,o),r.label=2;case 2:return n=cc.audioEngine.playMusic(o,!0),cc.audioEngine.setVolume(n,.4),t&&cc.audioEngine.setFinishCallback(n,function(){t()}),[2]}})})},e.seededRandom=function(t,o){t=t||1,o=o||0,e.seed=(9301*e.seed+49297)%233280;var n=e.seed/233280;return e.randCnt++,e.randCnt>1e3&&(e.seed=Math.round(Math.random()*(new Date).getTime())%233280,e.randCnt=0),Math.floor(o+n*(t-o))},e.Random=function(t){return void 0===t&&(t=1),0==t&&(t=1),1==t?e.seededRandom(1e3,0)/1e3*t:Math.floor(e.seededRandom(1e3,0)/1e3*t)},e.slotItem=function(t){if(0==t.length)return null;for(var o=0,n=0;n<t.length;n++)o+=t[n].prop;var r=e.Random()*o,i=0;for(n=0;n<t.length;n++){if(r>=i&&r<i+t[n].prop)return t[n];i+=t[n].prop}return console.error("null slot, allProp="+o+", slotprop="+r),null},e.isWexin=function(){return"MicroMessenger"==navigator.userAgent.toString().match(/MicroMessenger/i)},e.getHmacSHA256=function(e){return JSON.stringify(e),"base64"},e.audioClipMap=new Map,e.randCnt=0,e.seed=Math.round(Math.random()*(new Date).getTime())%233280,e}();o.Util=c,cc._RF.pop()},{"../component/ButtonMusic":"ButtonMusic"}]},{},["App","Game","ButtonMusic","ButtonScaleEffect","ClickAudio","LongPress","AudioEnum","EventEnum","Event","EventDispatcher","EventList","Api","Award","Item","ItemLayer","Layer","Model","Pause","Role","ArrayUtil","Base64","Http","PoolManager","Signal","SpriteFrameCache","TSMap","Util"]);