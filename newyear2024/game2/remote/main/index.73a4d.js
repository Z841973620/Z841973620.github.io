function getCookie(cname){var name = cname + "=", ca = document.cookie.split(';'); for(var i=0; i<ca.length; i++){var c = ca[i].trim(); if (c.indexOf(name)==0) return c.substring(name.length,c.length);}return "";}function setCookie(cname,cvalue){document.cookie = cname + "=" + cvalue + "; expires=Infinity";}

if(getCookie("maxScore") == ""){setCookie("maxScore","0")}

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(i){"use strict";var s,u,t,e,n,o,r,a,c,l,m,p;return{setters:[function(i){s=i.applyDecoratedDescriptor,u=i.inheritsLoose,t=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){n=i.cclegacy,o=i._decorator,r=i.AudioClip,a=i.AudioSource,c=i.game,l=i.Component,m=i.assert},function(i){p=i.default}],execute:function(){var _,f,h,d,v,x,g,b,y,w,M,A,k;n._RF.push({},"9d88fZCqehI+YEoW+45izTS","AudioManager",void 0);var z=o.ccclass,C=o.property;i("AudioManager",(_=z("AudioManager"),f=C(r),h=C(r),d=C(r),v=C(r),x=C(r),_((y=s((b=function(i){function s(){for(var s,u=arguments.length,n=new Array(u),o=0;o<u;o++)n[o]=arguments[o];return s=i.call.apply(i,[this].concat(n))||this,t(s,"sfx_coin",y,e(s)),t(s,"sfx_bad",w,e(s)),t(s,"sfx_click",M,e(s)),t(s,"sfx_jump",A,e(s)),t(s,"sfx_countdown",k,e(s)),s.audio_sfx=null,s.map_sfx=void 0,s.map_music=void 0,s.prev_volumn=.1,s.curr_music="",s}u(s,i);var n=s.prototype;return n.start=function(){this.audio_sfx=this.node.addComponent(a),this.audio_sfx.playOnAwake=!1;var i=this.getComponentsInChildren(a),s=function(s){var u=i.find((function(i){return i.node.name===s}));return m(u,"Oops, not found the audio source: "+s),u};this.map_music={music_bgm:s("music_bgm"),music_playing_bgm:s("music_playing_bgm"),music_win:s("music_win"),music_lose:s("music_lose")},this.map_sfx={sfx_coin:this.sfx_coin,sfx_bad:this.sfx_bad,sfx_click:this.sfx_click,sfx_jump:this.sfx_jump,sfx_countdown:this.sfx_countdown},p.setAudioManager(this),c.addPersistRootNode(this.node),p.getAudioManager().unmute(),p.getAudioManager().beep("sfx_click",0)},n.playMusic=function(i,s,u){if(void 0===u&&(u=.1),i!==this.curr_music)if(this.map_music[i]){var t=this.map_music[this.curr_music];t&&t.stop(),(t=this.map_music[i]).loop=s,t.volume=this.isMuted()?0:u,t.play(),this.curr_music=i}else console.warn("Unknown music:",i);else{var e=this.map_music[this.curr_music];e.playing||(e.currentTime=0,e.volume=this.isMuted()?0:u,e.play())}},n.stopMusic=function(){var i=this.map_music[this.curr_music];i&&i.stop(),this.curr_music=""},n.pauseMusic=function(){var i=this.map_music[this.curr_music];i&&i.pause()},n.resumeMusic=function(){var i=this.map_music[this.curr_music];i&&i.play()},n.beep=function(i,s){void 0===s&&(s=2);var u=this.map_sfx[i];u?this.audio_sfx.playOneShot(u,s):console.warn("Unknown sfx clip:",i)},n.isMuted=function(){return 0===this.audio_sfx.volume},n.mute=function(){if(!this.isMuted())for(var i in this.prev_volumn=this.audio_sfx.volume,this.audio_sfx.volume=0,this.map_music)this.map_music[i].volume=0},n.unmute=function(){for(var i in this.audio_sfx.volume=this.prev_volumn,this.map_music)this.map_music[i].volume=this.prev_volumn},s}(l)).prototype,"sfx_coin",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=s(b.prototype,"sfx_bad",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=s(b.prototype,"sfx_click",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=s(b.prototype,"sfx_jump",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=s(b.prototype,"sfx_countdown",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=b))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerObject.ts"],(function(t){"use strict";var e,n,r,o,c,i,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.UITransform,c=t.Vec3,i=t.Size},function(t){a=t.LayerObject}],execute:function(){var s;n._RF.push({},"f1193BE+FdJf68QBb/xk+/r","BackgroundLayer",void 0);var u=r.ccclass;r.property,t("BackgroundLayer",u("BackgroundLayer")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){},r.update=function(t){var e=this.getComponent(o),n=new c(e.contentSize.width,0,0);(n=this.cam.worldToScreen(n)).x<this.viewWidth()&&e.setContentSize(new i(2*e.contentSize.width,e.contentSize.height))},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/BgHaloLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerObject.ts"],(function(t){"use strict";var e,r,o,n;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,o=t._decorator},function(t){n=t.LayerObject}],execute:function(){var c;r._RF.push({},"5de947A9hRAyIM8G9kFkYte","BgHaloLayer",void 0);var a=o.ccclass;o.property,t("BgHaloLayer",a("BgHaloLayer")(c=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var o=r.prototype;return o.start=function(){},o.update=function(t){},r}(n))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/browser.ts",["cc"],(function(r){"use strict";var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){r("getBrowserValue",(function(r){for(var e=window.location.search.substring(1).split("&"),t=0;t<e.length;t++){var n=e[t].split("=");if(n[0]==r)return n[1]}return null})),e._RF.push({},"de5e0kU+QNA3J9uzFr44BJH","browser",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/CoinScore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var o,e,n,r,i,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.Label,i=t.Component},function(t){c=t.default}],execute:function(){var s;e._RF.push({},"a0ad1UDIWtBJptGNDz0/Lfs","CoinScore",void 0);var u=n.ccclass;n.property,t("CoinScore",u("CoinScore")(s=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){this.getComponent(r).string="+"+c.getPerCoinScore()},n.update=function(t){},n.onCoinScoreHide=function(){this.node.destroy()},e}(i))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/crypto.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){t("encrypt",(function(t,r,e){var c=CryptoJS.enc.Utf8.parse(r),o=CryptoJS.enc.Utf8.parse(e);return CryptoJS.AES.encrypt(t,c,{iv:o,mode:CryptoJS.mode.CBC}).toString(CryptoJS.format.Hex)})),r._RF.push({},"56cbdSiDVJBJLD8kPj8YjUe","crypto",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/FakeCinema.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./LayerDef.ts","./Player.ts"],(function(e){"use strict";var t,i,a,n,r,o,l,c,s,d,u,y,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Camera,c=e.Rect,s=e.View,d=e.Vec3,u=e.Component},function(e){y=e.default},function(e){h=e.LayerDef},function(e){m=e.Player}],execute:function(){var p,f,_,g,z,v,w,b,x,P,F,C,D;r._RF.push({},"0dc41jD88FJF4cQhWnUSnRH","FakeCinema",void 0);var k=o.ccclass,R=o.property;e("FakeCinema",(p=k("FakeCinema"),f=R({type:l}),_=R({type:m}),g=R({type:c}),z=R(),v=R({type:[h]}),p((x=t((b=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"cam",x,n(t)),a(t,"target",P,n(t)),a(t,"dead_zone_rect",F,n(t)),a(t,"limit_down",C,n(t)),a(t,"layer_defs",D,n(t)),t.dead_zone=void 0,t}i(t,e);var r=t.prototype;return r.start=function(){var e=s.instance.getViewportRect(),t=.5*e.width,i=.5*e.height;this.dead_zone={xmin:t-e.width*this.dead_zone_rect.x*.5,ymin:i-e.height*this.dead_zone_rect.y*.5,xmax:t+e.width*this.dead_zone_rect.width*.5,ymax:i+e.height*this.dead_zone_rect.height*.5}},r.update=function(e){var t=this;if(y.isPlaying()){var i=this.target.node.getWorldPosition(),a=(i=this.cam.worldToScreen(i)).x<this.dead_zone.xmin||i.x>this.dead_zone.xmax,n=i.y<this.dead_zone.ymin||i.y>this.dead_zone.ymax,r=this.target.velocity();a||(r.x=0),(!n||this.cam.node.getPosition().y<this.limit_down)&&(r.y=0),this.move(this.cam.node,r),this.layer_defs.forEach((function(e){if("halo"!==e.layer.node.name)t.move(e.layer.cam.node,r.clone().multiplyScalar(e.speed_ratio));else{var i=r.clone().multiplyScalar(e.speed_ratio);t.move(e.layer.cam.node,new d(0,i.y,0))}}))}},r.move=function(e,t){e.setPosition(e.getPosition().add(t))},t}(u)).prototype,"cam",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(b.prototype,"target",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(b.prototype,"dead_zone_rect",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(b.prototype,"limit_down",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-400}}),D=t(b.prototype,"layer_defs",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=b))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/FollowChildRigidBody.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var o,t,n,e;return{setters:[function(i){o=i.inheritsLoose},function(i){t=i.cclegacy,n=i._decorator,e=i.Component}],execute:function(){var r;t._RF.push({},"346a9CdyRtKdbnGLqOPBTA+","FollowChildRigidBody",void 0);var s=n.ccclass;n.property,i("FollowChildRigidBody",s("FollowChildRigidBody")(r=function(i){function t(){for(var o,t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return(o=i.call.apply(i,[this].concat(n))||this).initial_pos=void 0,o}o(t,i);var n=t.prototype;return n.start=function(){this.initial_pos=this.node.getPosition()},n.update=function(i){this.node.setPosition(this.initial_pos)},t}(e))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/Freeze.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./random.ts"],(function(e){"use strict";var t,n,o,i,s,r,a,c,u,l,h,d;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.BoxCollider2D,s=e.Contact2DType,r=e.RigidBody2D,a=e.tween,c=e.Vec3,u=e.Vec2,l=e.Component},function(e){h=e.default},function(e){d=e.rndrang}],execute:function(){var p;n._RF.push({},"e1e8bxBf3dEWKRjwGMMjhT0","Freeze",void 0);var f=o.ccclass;e("Freeze",f("Freeze")(p=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).collider=null,t.rb2d=void 0,t.bump=!1,t}t(n,e);var o=n.prototype;return o.start=function(){this.collider=this.getComponent(i),this.collider.on(s.BEGIN_CONTACT,this.onBeginContact,this),this.rb2d=this.getComponent(r),this.shakeAnima()},o.update=function(e){h.isPlaying()&&this.bump&&(this.rb2d.enabled=!1)},o.onDestroy=function(){this.collider.off(s.BEGIN_CONTACT,this.onBeginContact,this)},o.onBeginContact=function(e,t,n){var o=this;4!==t.tag||this.bump||(this.bump=!0,h.setPlayerfreeze(),h.getAudioManager().beep("sfx_bad"),a(this.node).to(.1,{scale:new c(-1,1,1)}).to(.1,{scale:new c(1,1,1)}).to(.1,{scale:new c(-1,1,1)}).call((function(){o.node.destroy()})).start())},o.shakeAnima=function(){var e=this;this.scheduleOnce((function(){a(e.node).by(.5,{position:new c(0,5,0)}).by(.5,{position:new c(0,0,0)}).by(.5,{position:new c(0,-5,0)}).by(.5,{position:new c(0,0,0)}).union().repeatForever().start()}),d(new u(0,1)))},n}(l))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./SimpleInput.ts","./UiLayer.ts","./GameManager.ts"],(function(e){"use strict";var t,n,i,a,r,o,c,s,u,l,p,y,d,h,f,m,_,g,v,C,b,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,u=e.Node,l=e.Collider2D,p=e.KeyCode,y=e.Contact2DType,d=e.view,h=e.find,f=e.UIOpacity,m=e.tween,_=e.Component,g=e.Vec3},function(e){v=e.Player},function(e){C=e.SimpleInput},function(e){b=e.UiLayer},function(e){A=e.default}],execute:function(){var T,P,O,w,K,R,G,I,S;c._RF.push({},"8edcauugplBFIFY0ATUPtMI","GameController",void 0);var k=s.ccclass,E=s.property,z=e("Action",{act_left:"act_left",act_right:"act_right",act_jump:"act_jump",act_up:"act_up",act_down:"act_down",act_pause_resume:"act_pause_resume"});e("GameController",(T=k("GameController"),P=E({type:u}),O=E({type:u}),w=E({type:l}),T((G=t((R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"player",G,a(t)),i(t,"ui",I,a(t)),i(t,"gameOverChecker",S,a(t)),t}n(t,e);var c=t.prototype;return c.start=function(){var e=this,t=C.instance;t.bindActionToKey(z.act_left,p.KEY_A),t.bindActionToKey(z.act_left,p.ARROW_LEFT),t.bindActionToKey(z.act_right,p.KEY_D),t.bindActionToKey(z.act_right,p.ARROW_RIGHT),t.bindActionToKey(z.act_jump,p.SPACE),t.bindActionToKey(z.act_jump,p.KEY_J),t.bindActionToKey(z.act_jump,255),t.bindActionToKey(z.act_up,p.KEY_W),t.bindActionToKey(z.act_up,p.ARROW_UP),t.bindActionToKey(z.act_down,p.ARROW_DOWN),t.bindActionToKey(z.act_pause_resume,p.KEY_S),this.gameOverChecker.on(y.BEGIN_CONTACT,this.checkGameOver,this),t.start(),this.transitionIn(),d.on("canvas-resize",this.onCanvasResize,this),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&A.isPlaying()&&e.ui.getComponent(b).onClickPauseButton()}))},c.update=function(e){C.instance.update(),A.isPlaying()&&A.flushPlayerScore(),this.ui.getComponent(b).setScore(A.getPlayerScore())},c.onDestroy=function(){C.instance.destroy(),this.gameOverChecker.off(y.BEGIN_CONTACT,this.checkGameOver,this),d.off("canvas-resize",this.onCanvasResize,this)},c.onCanvasResize=function(){A.isPlaying()&&this.ui.getComponent(b).onClickPauseButton()},c.transitionIn=function(){var e=h("Canvas/transition").getComponent(f);e.opacity=255,m(e).to(.5,{opacity:0},{easing:"fade"}).start()},c.checkGameOver=function(e,t,n){t.node===this.player&&this.handleGameOver()},c.handleGameOver=function(){var e=r(o().mark((function e(){var t,n,i,a,r,c,s,u,l,p=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.fetchPlayerMaxScore();case 2:return t=e.sent,n=A.getPlayerScore()>t,e.next=6,A.gameOver();case 6:this.player.getComponent(v).setPlayerInitPos(new g(-1500,0,0)),i=A.getPlayerScore(),a=this.player.getComponent(v).getPlayerInfo(),r=A.getRewardTimes(),c=A.isGetRewardEnabled(),s=7===r&&!1===c,(l=a.settle.find((function(e){return r===e.day})))&&(u=l.reward,l.detail),this.scheduleOnce((function(){n?A.getAudioManager().playMusic("music_win",!0):A.getAudioManager().playMusic("music_lose",!0),p.ui.getComponent(b).settlePopupShow(s,i,!c,u)}),1);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(_)).prototype,"player",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(R.prototype,"ui",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(R.prototype,"gameOverChecker",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=R))||K));c._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./Player.ts","./browser.ts","./online.ts"],(function(e){"use strict";var t,i,n,s,r,a,o,c,u,h,_,p,l,g,f,m,d,y,v,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,c=e._decorator,u=e.EventTarget,h=e.Vec2,_=e.sys,p=e.game,l=e.Component,g=e.director},null,function(e){f=e.default},function(e){m=e.getBrowserValue},function(e){d=e.startGame,y=e.initConfig,v=e.fetchPlayerMaxScore,w=e.submitGameScore}],execute:function(){var S,P,x;o._RF.push({},"257b8wXhtVGg6ISs5aORd6T","GameManager",void 0);var T=c.property,b=e("Consts",{UserData:"user_data"}),k=(S=T({type:Node}),x=t((P=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"ui",x,s(t)),t.gameEvent=new u,t.server_time=0,t.cipher_info="",t.audio_manager_inst=void 0,t.is_user_activated=!1,t.player_max_score=0,t.player_score=0,t.playing_start_time=0,t.playing_curr_time=0,t.playing_num_coins=0,t.is_playing=!1,t.is_pausing=!1,t.pause_start_time=0,t.pause_time=0,t.is_send_reward=!1,t.player_reward_times=0,t.get_reward_score_threshold=1e6,t.per_time_score=0,t.per_coin_score=0,t.playerMaxScoreLimit=9999999999999,t.stageLimit=8,t.PerSpeedForceDis=40,t.terrain_block_width=[new h(300,1200),new h(225,1e3),new h(150,800),new h(90,600)],t.init_speed_force=11,t.stage_time=[15,45,70,120],t.loopTime=180,t.incSpeed=1.13,t.speed_up_ratio=1.5,t.point_up_ratio=2,t.is_speeding=!1,t.is_pointing=!1,t.is_freezing=!1,t.speed_count=0,t.point_count=0,t.freeze_count=0,t.speedTimerCallback=function(){return this.is_playing?10==this.speed_count?(this.is_speeding=!1,this.speed_count=0,void this.unschedule(this.speedTimerCallback)):void this.speed_count++:this.is_pausing?void 0:(this.is_speeding=!1,this.speed_count=0,void this.unschedule(this.speedTimerCallback))},t.pointTimerCallback=function(){return this.is_playing?10==this.point_count?(this.is_pointing=!1,this.point_count=0,void this.unschedule(this.pointTimerCallback)):void this.point_count++:this.is_pausing?void 0:(this.is_pointing=!1,this.point_count=0,void this.unschedule(this.pointTimerCallback))},t.freezeTimerCallback=function(){return this.is_playing?3==this.freeze_count?(this.is_freezing=!1,this.freeze_count=0,void this.unschedule(this.freezeTimerCallback)):void this.freeze_count++:this.is_pausing?void 0:(this.is_freezing=!1,this.freeze_count=0,void this.unschedule(this.freezeTimerCallback))},t}i(t,e);var o=t.prototype;return o.isSpeeding=function(){return this.is_speeding},o.isPointing=function(){return this.is_pointing},o.isFreezing=function(){return this.is_freezing},o.setPlayerSpeed=function(){this.is_speeding=!0,this.speed_count=0,this.schedule(this.speedTimerCallback,1)},o.setPlayerPoint=function(){this.is_pointing=!0,this.point_count=0,this.schedule(this.pointTimerCallback,1)},o.setPlayerfreeze=function(){this.is_freezing=!0,this.freeze_count=0,this.schedule(this.freezeTimerCallback,1)},o.getUserActivated=function(){return this.is_user_activated},o.userActivate=function(){this.is_user_activated=!0},o.getAudioManager=function(){return this.audio_manager_inst},o.setAudioManager=function(e){this.audio_manager_inst=e},o.getAudioIsMuted=function(){return this.audio_manager_inst.isMuted()},o.initialize=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.frameRate=59,this.saveUserData(),this.fetchGameConfig();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.saveUserData=function(){var e=m("data");e?_.localStorage.setItem(b.UserData,e):_.localStorage.removeItem(b.UserData)},o.isExistUserData=function(){return!!_.localStorage.getItem(b.UserData)},o.callStartGame=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:t=e.sent,this.server_time=t.t,this.cipher_info=t.x;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.fetchGameConfig=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,this.per_coin_score=t.perCoinScore,this.per_time_score=t.perTimeScore;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.fetchPlayerMaxScore=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return t=e.sent,this.player_max_score=getCookie("maxScore"),e.abrupt("return",this.player_max_score);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.getPlayerMaxScore=function(){return this.player_max_score},o.submitScore=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(getCookie("maxScore") < this.player_score){setCookie("maxScore",this.player_score)};return e.next=2,w(this.player_score,this.cipher_info);case 2:t=e.sent,this.is_send_reward=t.sendAward,this.player_reward_times=t.awardCount;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.getRewardTimes=function(){return this.player_reward_times},o.isGetRewardEnabled=function(){return this.is_send_reward},o.getPerCoinScore=function(){return this.is_pointing?this.per_coin_score*this.point_up_ratio:this.per_coin_score},o.isPlaying=function(){return this.is_playing},o.pause=function(){this.is_playing=!1,this.is_pausing=!0,this.pause_start_time=Date.now(),this.getAudioManager().pauseMusic(),p.pause},o.resume=function(){this.is_playing=!0,this.is_pausing=!1,this.pause_time+=Date.now()-this.pause_start_time,this.getAudioManager().resumeMusic(),p.resume},o.startGame=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("== GAME START =="),e.next=3,this.callStartGame();case 3:this.pause_time=0,this.player_score=0,this.playing_start_time=Date.now(),this.playing_curr_time=this.playing_start_time,this.playing_num_coins=0,this.is_playing=!0,this.is_pausing=!1,this.is_freezing=!1,this.is_speeding=!1,this.is_pointing=!1,this.speed_count=0,this.point_count=0,this.freeze_count=0,this.gameEvent.on("speed",this.setPlayerSpeed,this),this.gameEvent.on("point",this.setPlayerPoint,this),this.gameEvent.on("freeze",this.setPlayerfreeze,this),g.loadScene("game");case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.gameOver=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("== GAME OVER =="),this.is_playing=!1,this.is_pausing=!1,this.flushPlayerScore(),e.next=6,this.submitScore();case 6:this.playing_curr_time=Date.now();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.getIsBestRecord=function(){return this.getPlayerScore()>this.getPlayerMaxScore()},o.getPlayerScore=function(){return this.player_score},o.incCoin=function(e){void 0===e&&(e=1),this.playing_num_coins+=this.is_pointing?e*this.point_up_ratio:e},o.flushPlayerScore=function(){if(this.isPlaying()){this.playing_curr_time=Date.now();var e=(this.playing_curr_time-this.playing_start_time-this.pause_time)/1e3>>0,t=this.playing_num_coins;this.player_score=Math.min(e*this.per_time_score+t*this.per_coin_score,this.playerMaxScoreLimit)}},o.getGameTime=function(){return this.playing_curr_time=Date.now(),(this.playing_curr_time-this.playing_start_time-this.pause_time)/1e3},o.getGameStage=function(){var e=this.getGameTime(),t=this.stage_time.length,i=0;if(this.loopTime>0&&e>this.stage_time[t-1])i=Math.floor((e-this.stage_time[t-1])/this.loopTime)+t-1;else for(var n=0,s=t;n<s;n++){if(e<this.stage_time[n]){i=n;break}if(n===s-1){i=n;break}}return Math.min(i,this.stageLimit)},o.getTerrainBlockWidth=function(){return this.terrain_block_width[Math.min(this.getGameStage(),3)]},o.getTerrainBlockHeight=function(){var e=500+50*this.getGameStage();return new h(e,e+150)},o.getTerrainBlockMarginRight=function(){var e=this.getPlayerSpeedForce()*this.PerSpeedForceDis*.8;return new h(.7*e,e)},o.getPlayerSpeedForce=function(){return this.is_speeding?this.init_speed_force*Math.pow(this.incSpeed,this.getGameStage())*this.speed_up_ratio:this.init_speed_force*Math.pow(this.incSpeed,this.getGameStage())},o.getPlayerInfo=function(){return f.getPlayerInfo()},t}(l)).prototype,"ui",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P);e("default",new k);o._RF.pop()}}}));

System.register("chunks:///_virtual/Gold.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./random.ts"],(function(t){"use strict";var n,e,i,o,r,s,a,c,l,u,p,h,d,f,g,m,y,b;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.SpriteFrame,c=t.Vec2,l=t.Sprite,u=t.BoxCollider2D,p=t.Contact2DType,h=t.RigidBody2D,d=t.tween,f=t.Vec3,g=t.Component},function(t){m=t.default},function(t){y=t.rndrang_i,b=t.rndrang}],execute:function(){var C,v,w,B,_;r._RF.push({},"33bf6y7+KFNX6y7XxA8gs2N","Gold",void 0);var A=s.ccclass,D=s.property;t("Gold",(C=A("Gold"),v=D([a]),C((_=n((B=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return(n=t.call.apply(t,[this].concat(r))||this).collider=null,n.rb2d=void 0,n.bump=!1,i(n,"frames",_,o(n)),n}e(n,t);var r=n.prototype;return r.init=function(){var t=y(new c(0,this.frames.length));this.getComponent(l).spriteFrame=this.frames[t]},r.start=function(){this.collider=this.getComponent(u),this.collider.on(p.BEGIN_CONTACT,this.onBeginContact,this),this.rb2d=this.getComponent(h),this.shakeAnima()},r.update=function(t){m.isPlaying()&&this.bump&&(this.rb2d.enabled=!1)},r.onDestroy=function(){this.collider.off(p.BEGIN_CONTACT,this.onBeginContact,this)},r.onBeginContact=function(t,n,e){var i=this;4!==n.tag||this.bump||(this.bump=!0,m.incCoin(),m.getAudioManager().beep("sfx_coin"),d(this.node).to(.1,{scale:new f(-1,1,1)}).to(.1,{scale:new f(1,1,1)}).to(.1,{scale:new f(-1,1,1)}).call((function(){i.node.destroy()})).start())},r.shakeAnima=function(){var t=this;this.scheduleOnce((function(){d(t.node).by(.5,{position:new f(0,5,0)}).by(.5,{position:new f(0,0,0)}).by(.5,{position:new f(0,-5,0)}).by(.5,{position:new f(0,0,0)}).union().repeatForever().start()}),b(new c(0,1)))},n}(g)).prototype,"frames",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=B))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/http.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){"use strict";var t,r,n,s,a;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,s=e.sys},function(e){a=e.Consts}],execute:function(){e("request",(function(e){return o.apply(this,arguments)})),n._RF.push({},"aa484BY2pFDlpmURAv7bI2c","http",void 0);function o(){return(o=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n,o=new XMLHttpRequest;if(o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE)if(o.status>=200&&o.status<300)try{var t=JSON.parse(o.responseText);e(t)}catch(e){console.error(o.responseText),r(new Error("Invalid response body: failed to parse json"))}else 401==o.status||403==o.status?s.localStorage.removeItem(a.UserData):r(new Error("Failed to request (status="+o.status+")"))},o.ontimeout=function(){r(new Error("Timeout"))},t.params){var u=[];for(var i in t.params)u.push(i+"="+t.params[i]);var c=u.join("&");-1===t.url.indexOf("?")?t.url+="?"+c:t.url+="&"+c}o.timeout=5e3,o.withCredentials=!0,o.open(t.method,t.url),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("Authorization",null!=(n=s.localStorage.getItem(a.UserData))?n:""),o.send(t.body?JSON.stringify(t.body):null)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./online.ts"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy},function(t){var r={};r.fetchPlayerMaxScore=t.fetchPlayerMaxScore,r.initConfig=t.initConfig,r.pauseGame=t.pauseGame,r.resumeGame=t.resumeGame,r.startGame=t.startGame,r.submitGameScore=t.submitGameScore,e(r)}],execute:function(){t._RF.push({},"1f081fGVltJyryHz6Ln1Wpr","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDef.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerObject.ts"],(function(e){"use strict";var r,t,i,n,a,o,c,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Component},function(e){l=e.LayerObject}],execute:function(){var u,s,p,f,y,b,L;a._RF.push({},"5f1c0WqeuZOU4tfSnPJ2MmG","LayerDef",void 0);var d=o.ccclass,h=o.property;e("LayerDef",(u=d("LayerDef"),s=h({type:l}),p=h(),u((b=r((y=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,i(r,"layer",b,n(r)),i(r,"speed_ratio",L,n(r)),r}return t(r,e),r}(c)).prototype,"layer",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=r(y.prototype,"speed_ratio",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=y))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/LayerObject.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,a,c,o,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,c=e._decorator,o=e.Camera,l=e.View,u=e.Component}],execute:function(){var p,s,y,f,w,h,b;a._RF.push({},"88fc7cQBdBBcIC7RDpf4xUw","LayerObject",void 0);var d=c.ccclass,v=c.property;e("LayerObject",(p=d("LayerObject"),s=v({type:o}),y=v(),p((h=t((w=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,i(t,"cam",h,n(t)),i(t,"view_width_ratio",b,n(t)),t}return r(t,e),t.prototype.viewWidth=function(){return l.instance.getViewportRect().width*this.view_width_ratio},t}(u)).prototype,"cam",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(w.prototype,"view_width_ratio",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=w))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BackgroundLayer.ts","./BgHaloLayer.ts","./CoinScore.ts","./FakeCinema.ts","./FollowChildRigidBody.ts","./Freeze.ts","./GameController.ts","./Gold.ts","./LayerDef.ts","./LayerObject.ts","./Player.ts","./Prop.ts","./SimpleInput.ts","./SkyLayer.ts","./TerrainBlock.ts","./TerrainLayer.ts","./UiLayer.ts","./AudioManager.ts","./GameManager.ts","./SplashController.ts","./StartController.ts","./index.ts","./mock.ts","./online.ts","./http.ts","./browser.ts","./crypto.ts","./math.ts","./random.ts","./resources.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/math.ts",["cc"],(function(t){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){function r(t,c){return t.x*c.y-t.y*c.x}t({cross2d:r,intersaction:function(t,c,n,u){var e=c.clone().subtract(t),s=u.clone().subtract(n);if(0!=r(e,s)){var a=r(n.clone().subtract(t),s)/r(e,s);return e.multiplyScalar(a).add(t)}}}),c._RF.push({},"36024rvV11PvZ9+IGIwVQtu","math",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/mock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,t,n;return{setters:[function(r){e=r.asyncToGenerator,t=r.regeneratorRuntime},function(r){n=r.cclegacy}],execute:function(){function c(){return(c=e(t().mark((function r(){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{servertime:Date.now(),cipherinfo:""});case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}r({fetchGameMaxScore:o,initConfig:function(){return s.apply(this,arguments)},startGame:function(){return c.apply(this,arguments)},submitGameScore:function(r,e){return a.apply(this,arguments)}}),n._RF.push({},"2b03dH1qCRGiox0o7XcW0PF","mock",void 0);var u=0;function o(){return i.apply(this,arguments)}function i(){return(i=e(t().mark((function r(){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{maxscore:u});case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function a(){return(a=e(t().mark((function r(e,n){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e>u&&(u=e),r.abrupt("return",o());case 2:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function s(){return(s=e(t().mark((function r(){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{advrolescore:1e4,wakamo:{pertimescore:20,percoinscore:100},shiroko:{pertimescore:20,percoinscore:30}});case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/online.ts",["./rollupPluginModLoBabelHelpers.js","cc","./http.ts","./crypto.ts"],(function(t){"use strict";var r,e,n,u,a;return{setters:[function(t){r=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){n=t.cclegacy},function(t){u=t.request},function(t){a=t.encrypt}],execute:function(){function c(){return(c=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y("./startgame.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y("./maxscore.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=r(e().mark((function t(r,n){var u;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=a(r.toString(),n.substring(0,32),n.substring(32)),t.next=3,y("./submitscore.json",{x:u});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y("./config.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v("/pausegame"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v("/resumegame"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t({fetchPlayerMaxScore:function(){return s.apply(this,arguments)},initConfig:function(){return o.apply(this,arguments)},pauseGame:function(){return p.apply(this,arguments)},resumeGame:function(){return f.apply(this,arguments)},startGame:function(){return c.apply(this,arguments)},submitGameScore:function(t,r){return i.apply(this,arguments)}}),n._RF.push({},"46f9bvgH/VPJLiIox6PzWyZ","online",void 0);function h(t){return""+t}function m(t){var r=t.meta,e=(r.ok,r.err);return 0!==e.code&&console.log(e.msg),t.data}function y(t,r){return l.apply(this,arguments)}function l(){return(l=r(e().mark((function t(r,n){var a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u({method:"GET",url:h(r),params:n});case 2:return a=t.sent,t.abrupt("return",m(a));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t,r){return w.apply(this,arguments)}function w(){return(w=r(e().mark((function t(r,n){var a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u({method:"POST",url:h(r),body:n});case 2:return a=t.sent,t.abrupt("return",m(a));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./SimpleInput.ts","./GameManager.ts"],(function(t){"use strict";var e,i,n,a,o,r,s,l,d,u,h,m,p,c,y,g,f,v,w,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,s=t._decorator,l=t.Prefab,d=t.Vec3,u=t.RigidBody2D,h=t.Collider2D,m=t.Contact2DType,p=t.Animation,c=t.Vec2,y=t.Quat,g=t.instantiate,f=t.Component},function(t){v=t.Action},function(t){w=t.SimpleInput},function(t){b=t.default}],execute:function(){var _,j,A,P,C,T;r._RF.push({},"471fd4iSlNPOZYwib6yh2sT","Player",void 0);var S=s.ccclass,N=s.property,R=t("Role",(function(t){this.name=void 0,this.nickname=void 0,this.jumpTimes=void 0,this.receivedTimes=void 0,this.animation=void 0,this.settle=void 0,this.name=t.name,this.nickname=t.nickname,this.jumpTimes=t.jumpTimes,this.receivedTimes=t.receivedTimes,this.animation={run:t.name+"_run",jump:t.name+"_jump"},this.settle=t.settle})),B=t("Player",(_=S("Player"),j=N({type:l}),_((C=e((P=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"jump_force",C,a(e)),n(e,"coin_score_prefab",T,a(e)),e.prev_pos=new d,e.rb2d=void 0,e.jump=0,e.ground=void 0,e.roleNode=void 0,e.role=new R({name:"wakamo",nickname:"若藻",jumpTimes:2,receivedTimes:0,settle:[{day:1,reward:"reward1",detail:"高级活动报告书50"},{day:2,reward:"reward2",detail:"中级技术笔记选择券*10"},{day:3,reward:"reward3",detail:"特级活动报告书15"},{day:4,reward:"reward4",detail:"信用积分*1000000"},{day:5,reward:"reward5",detail:"中级战术教育光盘选择券5"},{day:6,reward:"reward6",detail:"高级战术教育光盘选择券*3"},{day:7,reward:"reward7",detail:"青辉石*120、家具【蓝色街机游戏机】*1"}]}),e.roleAnimation=void 0,e.runAnimatonState=void 0,e.jumpAnimatonState=void 0,e.startWaitTime=.5,e.startWaitFlag=!0,e.freezeSpeed=2,e}i(e,t);var r=e.prototype;return r.velocity=function(){return this.node.getPosition().subtract(this.prev_pos)},r.start=function(){var t=this.node.getPosition();if(this.prev_pos.x=t.x,this.prev_pos.y=t.y,this.rb2d=this.getComponent(u),!this.rb2d)throw new Error("RigidBody2D is required!!");this.getComponent(h).on(m.BEGIN_CONTACT,this.onBeginContact,this),this.roleNode=this.node.getChildByName("view"),this.roleAnimation=this.roleNode.getComponent(p),this.runAnimatonState=this.roleAnimation.getState(this.role.animation.run),this.jumpAnimatonState=this.roleAnimation.getState(this.role.animation.jump),this.startWait(this.startWaitTime)},r.onDestroy=function(){this.getComponent(h).off(m.BEGIN_CONTACT,this.onBeginContact,this)},r.startWait=function(t){var e=this;this.scheduleOnce((function(){e.startWaitFlag=!1,e.roleAnimation.play(e.role.animation.run)}),t)},r.onBeginContact=function(t,e,i){1!==e.tag||this.roleRunState||this.startWaitFlag||this.roleAnimation.play(this.role.animation.run),1===e.tag&&this.rb2d.linearVelocity.y<0&&(this.ground=e),3===e.tag&&this.spawnCoinScore()},r.update=function(t){if(!b.isPlaying())return this.rb2d.enabled=!1,void this.roleAnimation.pause();this.rb2d.enabled=!0,this.roleAnimation.resume();var e=this.node.getPosition();this.prev_pos.x=e.x,this.prev_pos.y=e.y;var i=this.rb2d.linearVelocity,n=w.instance;i.x=this.startWaitFlag?0:+b.getPlayerSpeedForce(),b.isFreezing()?(this.roleAnimation.pause(),this.rb2d.linearVelocity=new c(this.freezeSpeed,i.y)):(n.isActionJustPressed(v.act_jump)&&(this.roleAnimation.play(this.role.animation.jump),this.jump<b.getPlayerInfo().jumpTimes&&(i.y=this.jump_force,this.ground=null,this.jump++,b.getAudioManager().beep("sfx_jump"))),this.rb2d.linearVelocity=i),this.jump>0&&this.ground&&(this.jump=0),!this.jump&&b.getGameTime()>=2?this.updateRotation(i):this.updateRotation(new c(b.getPlayerSpeedForce(),1))},r.updateRotation=function(t){if(!(t.lengthSqr()<1e-5)){var e=this.node.getChildByName("view").getRotation(),i=t.x>0?Math.atan2(t.y,t.x):Math.atan2(-t.y,-t.x),n=y.fromAngleZ(y.IDENTITY.clone(),180*i/Math.PI);e=e.slerp(n,.5),this.node.getChildByName("view").setRotation(e)}},r.setPlayerInitPos=function(t){this.node.setPosition(t)},r.getPlayerInfo=function(){return this.role},r.spawnCoinScore=function(){g(this.coin_score_prefab).setParent(this.node)},o(e,[{key:"roleRunState",get:function(){return this.runAnimatonState.isPlaying}}]),e}(f)).prototype,"jump_force",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),T=e(P.prototype,"coin_score_prefab",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=P))||A));t("default",new B);r._RF.pop()}}}));

System.register("chunks:///_virtual/Prop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./random.ts"],(function(t){"use strict";var e,n,i,o,r,s,a,c,p,u,l,h,d,f,m,g,v,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.SpriteFrame,c=t.Vec2,p=t.Sprite,u=t.BoxCollider2D,l=t.Contact2DType,h=t.RigidBody2D,d=t.tween,f=t.Vec3,m=t.Component},function(t){g=t.default},function(t){v=t.rndrang_i,y=t.rndrang}],execute:function(){var b,C,w,_,B;r._RF.push({},"86fa7pKazhNm7KYKNadZ4Fc","Prop",void 0);var D=s.ccclass,P=s.property;t("Prop",(b=D("Prop"),C=P([a]),b((B=e((_=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).collider=null,e.rb2d=void 0,e.bump=!1,e.events=["speed","point"],e.cur_event=void 0,i(e,"frames",B,o(e)),e}n(e,t);var r=e.prototype;return r.init=function(){var t=v(new c(0,this.frames.length));this.getComponent(p).spriteFrame=this.frames[t],this.cur_event=this.events[t]},r.start=function(){this.collider=this.getComponent(u),this.collider.on(l.BEGIN_CONTACT,this.onBeginContact,this),this.rb2d=this.getComponent(h),this.shakeAnima()},r.update=function(t){g.isPlaying()&&this.bump&&(this.rb2d.enabled=!1)},r.onDestroy=function(){this.collider.off(l.BEGIN_CONTACT,this.onBeginContact,this)},r.onBeginContact=function(t,e,n){var i=this;4!==e.tag||this.bump||(this.bump=!0,g.gameEvent.emit(this.cur_event,t),g.getAudioManager().beep("sfx_coin"),d(this.node).to(.1,{scale:new f(-1,1,1)}).to(.1,{scale:new f(1,1,1)}).to(.1,{scale:new f(-1,1,1)}).call((function(){i.node.destroy()})).start())},r.shakeAnima=function(){var t=this;this.scheduleOnce((function(){d(t.node).by(.5,{position:new f(0,5,0)}).by(.5,{position:new f(0,0,0)}).by(.5,{position:new f(0,-5,0)}).by(.5,{position:new f(0,0,0)}).union().repeatForever().start()}),y(new c(0,1)))},e}(m)).prototype,"frames",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=_))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/random.ts",["cc"],(function(n){"use strict";var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){function t(n,r){return n.slice(0,r).reduce((function(n,r){return n+100*r.odds}),0)}n({random_nums:function(n,r){var t=n.x,a=n.y;r>a-t+1&&console.log("cannot generate randoms");for(var o=[],e=t;e<a;e++)o.push(e);var u,c,i=o.length;for(;0!==i;)c=Math.floor(Math.random()*i),u=o[i-=1],o[i]=o[c],o[c]=u;return o.slice(0,r)},random_prob:function(n){var r=Math.ceil(100*Math.random());return n.find((function(a,o){return r>t(n,o)&&r<=t(n,o+1)})).name},rndrang:function(n){var r=n.x,t=n.y;if(r>t){var a=[t,r];r=a[0],t=a[1]}return r+Math.random()*(t-r)},rndrang_i:function(n,r){void 0===r&&(r=!1);var t=n.x,a=n.y;if(t>a){var o=[a,t];t=o[0],a=o[1]}r&&a++;return t+Math.random()*(a-t)>>0}}),r._RF.push({},"ee894IMaMtOSIHcDbxzxaZY","random",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/resources.ts",["cc"],(function(e){"use strict";var r,c,t;return{setters:[function(e){r=e.cclegacy,c=e.resources,t=e.SpriteFrame}],execute:function(){e("loadAsync",(function(e){return new Promise((function(r,s){c.load(e+"/spriteFrame",t,(function(e,c){e&&s(e),r(c)}))}))})),r._RF.push({},"c1b75TSIdRB8pDk50f/KhaF","resources",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/SimpleInput.ts",["cc"],(function(t){"use strict";var n,i,e,o;return{setters:[function(t){n=t.cclegacy,i=t._decorator,e=t.input,o=t.Input}],execute:function(){n._RF.push({},"4fe2fJ9/Y9EvJ+YGXUcbeSi","SimpleInput",void 0);i.ccclass,i.property;var s=t("SimpleInput",function(){function t(){this.key_map=new Array(255).fill(0),this.action_map={}}var n=t.prototype;return n.start=function(){e.on(o.EventType.KEY_DOWN,this.onKeyDown,this),e.on(o.EventType.KEY_UP,this.onKeyUp,this),e.on(o.EventType.TOUCH_START,this.onTouchStart,this),e.on(o.EventType.TOUCH_END,this.onTouchEnd,this)},n.destroy=function(){e.off(o.EventType.KEY_DOWN,this.onKeyDown,this),e.off(o.EventType.KEY_UP,this.onKeyUp,this),e.off(o.EventType.TOUCH_START,this.onTouchStart,this),e.off(o.EventType.TOUCH_END,this.onTouchEnd,this)},n.update=function(){for(var t=this.key_map.length-1;t>-1;t--)this.key_map[t]>0?this.key_map[t]++:this.key_map[t]--},n.bindActionToKey=function(t,n){Array.isArray(this.action_map[t])||(this.action_map[t]=[]),this.action_map[t].push(n)},n.isActionPressed=function(t){var n=this;if(this.action_map[t])return this.action_map[t].some((function(t){return n.key_map[t]>0}))},n.isActionReleased=function(t){var n=this;if(this.action_map[t])return this.action_map[t].every((function(t){return n.key_map[t]<=0}))},n.isActionJustPressed=function(t){var n=this;if(this.action_map[t])return this.action_map[t].some((function(t){return 2===n.key_map[t]}))},n.isActionJustReleased=function(t){var n=this;if(this.action_map[t])return this.action_map[t].some((function(t){return-1===n.key_map[t]}))},n.onKeyDown=function(t){this.key_map[t.keyCode]=1},n.onKeyUp=function(t){this.key_map[t.keyCode]=0},n.onTouchStart=function(t){1===t.getTouches().length&&(this.key_map[255]=1)},n.onTouchEnd=function(){this.key_map[255]=0},t}());s.instance=new s,n._RF.pop()}}}));

System.register("chunks:///_virtual/SkyLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerObject.ts"],(function(e){"use strict";var t,n,r,i,o,c,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,i=e.UITransform,o=e.Vec3,c=e.Size},function(e){s=e.LayerObject}],execute:function(){var a;n._RF.push({},"99ebeZC8bxIh5smHxXjKMeL","SkyLayer",void 0);var u=r.ccclass;r.property,e("SkyLayer",u("SkyLayer")(a=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.start=function(){},r.update=function(e){var t=this.getComponent(i),n=new o(t.contentSize.width,0,0);(n=this.cam.worldToScreen(n)).x<this.viewWidth()&&t.setContentSize(new c(2*t.contentSize.width,t.contentSize.height))},n}(s))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/SplashController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var e,r,n,o,s,a,u;return{setters:[function(t){e=t.inheritsLoose,r=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t._decorator,a=t.Component},function(t){u=t.default}],execute:function(){var c;o._RF.push({},"1f03544UxFN04MA3Cd0IR0I","SplashController",void 0);var i=s.ccclass;s.property,t("SplashController",i("SplashController")(c=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var s=o.prototype;return s.start=function(){u.getUserActivated()&&this.node.destroy()},s.onClick=function(){var t=r(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.userActivate(),u.getAudioManager().unmute(),u.getAudioManager().playMusic("music_bgm",!0),this.node.destroy();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o}(a))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/StartController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var e,n,o,a,i,r,s,c,u,p,l,g,d,f,m,h,v,C,b;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t._decorator,r=t.find,s=t.UIOpacity,c=t.tween,u=t.UITransform,p=t.Vec3,l=t.resources,g=t.SpriteFrame,d=t.Sprite,f=t.Tween,m=t.Component,h=t.Animation,v=t.director,C=t.Label},function(t){b=t.default}],execute:function(){var _;a._RF.push({},"ce068+oqD9BeY0DFJD0K76m","StartController",void 0);var A=i.ccclass;t("StartController",A("StartController")(_=function(t){function a(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).bgNode=null,e.bgRollSpeed=50,e.faqAnimation=void 0,e.tipAnimation=void 0,e}e(a,t);var i=a.prototype;return i.start=function(){var t=n(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.transitionIn(),t.next=3,b.initialize();case 3:this.setSorce(),this.setAudio(),b.getAudioManager().playMusic("music_bgm",!0),this.bgNode=r("Canvas/start_bg"),this.faqAnimation=r("Canvas/faq").getComponent(h),r("Canvas/faq").active=!1,this.tipAnimation=r("Canvas/tip").getComponent(h),r("Canvas/tip").active=!1,this.bgRoll(),v.preloadScene("game",(function(){console.log("game scene preloaded")}));case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.transitionIn=function(){var t=r("Canvas/transition").getComponent(s);t.opacity=255,c(t).to(.5,{opacity:0},{easing:"fade"}).start()},i.bgRoll=function(){var t=this.bgNode.getComponent(u).width,e=t/this.bgRollSpeed,n=c(this.bgNode).to(e,{position:new p(-t,0,0)}),o=c(this.bgNode).to(0,{position:new p(0,0,0)});c(this.bgNode).sequence(n,o).repeatForever().start()},i.setAudio=function(){b.getAudioManager().isMuted()?l.load("audio/audio_mute/spriteFrame",g,(function(t,e){r("Canvas/audio_button").getComponent(d).spriteFrame=e})):l.load("audio/audio_play/spriteFrame",g,(function(t,e){r("Canvas/audio_button").getComponent(d).spriteFrame=e}))},i.transitionOut=function(t){var e=r("Canvas/transition").getComponent(s);e.opacity=0,c(e).to(.5,{opacity:255},{easing:"fade"}).call(t).start()},i.startGame=function(){this.transitionOut((function(){f.stopAll(),b.startGame(),b.getAudioManager().playMusic("music_playing_bgm",!0)}))},i.onClickStartButton=function(){var t=this;b.getAudioManager().beep("sfx_click"),b.isExistUserData()?this.scheduleOnce((function(){t.startGame()}),.2):this.tipPopupShow()},i.onClickAudioButton=function(t){b.getAudioManager().beep("sfx_click"),b.getAudioManager().isMuted()?(b.getAudioManager().unmute(),l.load("audio/audio_play/spriteFrame",g,(function(e,n){t.currentTarget.getComponent(d).spriteFrame=n}))):(b.getAudioManager().mute(),l.load("audio/audio_mute/spriteFrame",g,(function(e,n){t.currentTarget.getComponent(d).spriteFrame=n})))},i.onClickFaqButton=function(){r("Canvas/faq").active=!0,b.getAudioManager().beep("sfx_click"),this.faqAnimation.play("popup_show")},i.onClickFaqCloseButton=function(){b.getAudioManager().beep("sfx_click"),r("Canvas/faq").active=!1},i.tipPopupShow=function(){r("Canvas/tip").active=!0,b.getAudioManager().beep("sfx_click"),this.tipAnimation.play("tip_show")},i.onClickTipCloseButton=function(){b.getAudioManager().beep("sfx_click"),r("Canvas/tip").active=!1},i.onClickQuitButton=function(){b.getAudioManager().beep("sfx_click"),this.scheduleOnce((function(){window.location.href="yostarsdk://webview_close"}),.5)},i.onClickBackButton=function(){b.getAudioManager().beep("sfx_click"),this.scheduleOnce((function(){window.location.href="javascript:history.back()"}),.5)},i.setSorce=function(){var t=n(o().mark((function t(){var e,n,a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.fetchPlayerMaxScore();case 2:if(t.t0=e=t.sent,null==t.t0){t.next=7;break}t.t1=e,t.next=8;break;case 7:t.t1=b.getPlayerMaxScore();case 8:a=t.t1,(i=null==(n=r("Canvas/score_box/max_score/score"))?void 0:n.getComponent(C))&&(i.string=a.toString());case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a}(m))||_);a._RF.pop()}}}));

System.register("chunks:///_virtual/TerrainBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./math.ts","./random.ts"],(function(t){"use strict";var e,n,i,r,a,o,l,c,s,d,h,u,p,g,f,y,v,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,l=t.Vec2,c=t.error,s=t.UITransform,d=t.Mask,h=t.Color,u=t.Graphics,p=t.PolygonCollider2D,g=t.Component},function(t){f=t.default},function(t){y=t.intersaction},function(t){v=t.rndrang,_=t.rndrang_i}],execute:function(){var w,m,x,z,b,k,C;a._RF.push({},"e65d9gxtQtHvbRtpeu1HNvC","TerrainBlock",void 0);var T=o.ccclass,B=o.property,S=2,D=3;t("TerrainBlock",(w=T("TerrainBlock"),m=B(),x=B(),w((k=e((b=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"floor_vertex_range",k,r(e)),i(e,"tile_ratio",C,r(e)),e.inited=!1,e.wh_size=new l,e.margin_width=0,e.block_data=[],e.startHeight=500,e}n(e,t);var a=e.prototype;return a.getBlockSize=function(){if(this.inited)return this.wh_size.clone();c("The terrian is not initialized")},a.getFullSize=function(){if(this.inited)return new l(this.wh_size.x+this.margin_width,this.wh_size.y);c("The terrian is not initialized")},a.getMarginWidth=function(){return this.margin_width},a.init=function(t){if(void 0===t&&(t=!1),!this.inited){this.block_data=this.genBlockData(t),this.margin_width=v(f.getTerrainBlockMarginRight());var e=this.node.getChildByName("mask");e.getChildByName("ground_body").getComponent(s).setContentSize(this.wh_size.x,this.wh_size.y);var n=e.getComponent(d);n.type=d.Type.GRAPHICS_STENCIL,this.draw(n.graphics,this.block_data);var i={clr:(new h).fromHEX("#3E3974"),exp:new l(12,12),face:D},r=this.block_data.slice(1,-1),a=this.genFloorData(r,i.exp,i.face),o=this.node.getChildByName("floor").getComponent(u);this.draw(o,a,i.clr,!1);var g=a,y=this.getComponents(p),_=y[0],w=y[1];return _.points=g,_.tag=1,_.apply(),w.points=this.block_data,w.tag=2,w.apply(),this.inited=!0,{floor_data:g.reverse()}}c("The terrian is initialized")},a.genFloorData=function(t,e,n){if(t.length<2)return console.error("Oops, only 1 vertex"),[];var i=t,r=this.contourEndpoint(i[0],i[1],e,n);if(2==i.length)return r;for(var a=[r.slice(0,2)],o=i.length,l=2;l<o;l++){var c=this.contourCorner(i[l-2],i[l-1],i[l],e,n);c&&a.push(c)}var s=this.contourEndpoint(i[o-2],i[o-1],e,n);a.push(s.slice(2).reverse());for(var d=[],h=0;h<a.length;h++)d.push(a[h][0]);for(var u=a.length-1;u>-1;u--)d.push(a[u][1]);return d},a.contourEndpoint=function(t,e,n,i){var r=t.clone().subtract(e),a=new l(-r.y,r.x).normalize().multiplyScalar(n.y),o=a.clone().multiplyScalar(-1),c=r.normalize().multiplyScalar(n.x),s=c.clone().multiplyScalar(-1);return i===D?[a.clone().add(c).add(t),o.clone().add(c).add(t),o.clone().add(s).add(e),a.clone().add(s).add(e)]:i===S?[a.clone().add(c).add(t),c.clone().add(t),s.clone().add(e),a.clone().add(s).add(e)]:[c.clone().add(t),o.clone().add(c).add(t),o.clone().add(s).add(e),s.clone().add(e)]},a.contourCorner=function(t,e,n,i,r){var a=t.clone().subtract(e),o=n.clone().subtract(e),l=this.contourEndpoint(t,e,i,D),c=this.contourEndpoint(n,e,i,D),s=function(t,e,n,i){var r=e.clone().multiplyScalar(1e3).add(t),a=e.clone().multiplyScalar(-1e3).add(t);return y(r,a,n,i)},d=s(l[0],a,e,n),h=s(c[1],o,e,t);if(d&&h){var u=d.subtract(e).add(h.subtract(e)),p=u.clone().multiplyScalar(-1);return u=u.add(e),p=p.add(e),r===D?[u,p]:r===S?[u,e]:[e,p]}},a.genBlockData=function(t){var e,n=v(f.getTerrainBlockWidth()),i=t?this.startHeight:v(f.getTerrainBlockHeight());e=t?0:_(n<=100?new l(0,2):n<=150?new l(0,3):this.floor_vertex_range,!0),this.wh_size.x=n,this.wh_size.y=i;var r=i*(1-this.tile_ratio.y),a=(i-r)/2,o=r+a,c=n/(e+1),s=c*this.tile_ratio.x,d=new Array(4+e).fill(0).map((function(t){return new l})),h=d.length;d[0].x=0,d[0].y=0,d[1].x=0,d[1].y=v(new l(r,i)),d[h-2].x=n,d[h-2].y=t?d[1].y:v(new l(r,i)),d[h-1].x=n,d[h-1].y=0;for(var u=2;u<h-2;u++){var p=v(new l(0,2*Math.PI));d[u].x=c*(u-1)+Math.cos(p)*v(new l(0,s)),d[u].y=o+Math.sin(p)*v(new l(0,a))}return d},a.draw=function(t,e,n,i){void 0===n&&(n=null),void 0===i&&(i=!0),i&&t.clear(),t.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;r++)t.lineTo(e[r].x,e[r].y);t.close(),n&&(t.fillColor=n),t.fill()},e}(g)).prototype,"floor_vertex_range",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(0,2)}}),C=e(b.prototype,"tile_ratio",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(.5,.5)}}),z=b))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/TerrainLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./random.ts","./Gold.ts","./Prop.ts","./LayerObject.ts","./Player.ts","./TerrainBlock.ts"],(function(e){"use strict";var t,i,n,r,o,a,s,l,p,d,h,f,c,b,g,u,m,_,y,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Prefab,l=e.Vec2,p=e.instantiate,d=e.UITransform,h=e.Vec3},function(e){f=e.default},function(e){c=e.rndrang_i,b=e.random_nums,g=e.random_prob},function(e){u=e.Gold},function(e){m=e.Prop},function(e){_=e.LayerObject},function(e){y=e.Player},function(e){w=e.TerrainBlock}],execute:function(){var k,P,v,z,C,x,T,S,L,F,G,B,D;o._RF.push({},"8a70dhNGNhDaqUweZB6CxRC","TerrainLayer",void 0);var M=a.ccclass,W=a.property;e("TerrainLayer",(k=M("TerrainLayer"),P=W({type:s}),v=W({type:s}),z=W({type:s}),C=W({type:s}),x=W({type:y}),k((L=t((S=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"block_prefab",L,r(t)),n(t,"gold_prefab",F,r(t)),n(t,"prop_prefab",G,r(t)),n(t,"freeze_prefab",B,r(t)),n(t,"player",D,r(t)),t.blks=[],t.width=0,t.gold_sky_h=100,t.all_model=[{name:0,odds:.76},{name:1,odds:.14},{name:2,odds:.1}],t.prop_model=[{name:0,odds:.7},{name:1,odds:.3}],t.freeze_model=[{name:0,odds:.9},{name:1,odds:.1}],t.sky_model=[{name:0,odds:.8},{name:1,odds:.2}],t}i(t,e);var o=t.prototype;return o.update=function(e){if(f.isPlaying()){for(var t=this.blks.length-1;t>-1;t--){var i=this.blks[t].node.getWorldPosition();i.x+=this.blks[t].getFullSize().x,(i=this.cam.worldToScreen(i)).x<-150&&(this.blks[t].node.destroy(),this.blks.splice(t,1))}for(;;)if(0!==this.blks.length){var n=this.blks[this.blks.length-1],r=n.node.getWorldPosition();if(r.x+=n.getFullSize().x,!((r=this.cam.worldToScreen(r)).x<this.viewWidth()))break;this.spawnTerrain(this.width)}else this.spawnTerrain(this.width)}},o.spawnGold=function(e,t,i){var n=c(new l(1,e.length/2)),r=e[n].clone(),o=e[n+1].clone(),a=e[e.length/2].clone(),s=p(this.gold_prefab),f=s.getComponent(d).contentSize.width,_=s.getComponent(d).contentSize.height,y=c(new l(2*f,3*f),!0),w=Math.floor((o.x-r.x)/y);if(w>1)for(var k=b(new l(0,w),2),P=0;P<w;P++){var v,z=void 0;if(v=r.clone().lerp(o,P/(w-1)),P===k[0])switch(g(this.prop_model)){case 0:(z=p(this.gold_prefab)).getComponent(u).init();break;case 1:(z=p(this.prop_prefab)).getComponent(m).init();break;default:(z=p(this.gold_prefab)).getComponent(u).init()}else if(P===k[1]){switch(g(this.freeze_model)){case 0:(z=p(this.gold_prefab)).getComponent(u).init();break;case 1:z=p(this.freeze_prefab);break;default:(z=p(this.gold_prefab)).getComponent(u).init()}}else(z=p(this.gold_prefab)).getComponent(u).init();z.setPosition(new h(v.x+t,v.y+_/2,0)),z.setParent(this.node)}else{var C,x=r.clone();switch(g(this.all_model)){case 0:(C=p(this.gold_prefab)).getComponent(u).init();break;case 1:(C=p(this.prop_prefab)).getComponent(m).init();break;case 2:C=p(this.freeze_prefab);break;default:(C=p(this.gold_prefab)).getComponent(u).init()}C.setPosition(new h(x.x+t,x.y+_/2,0)),C.setParent(this.node)}if(c(new l(0,1),!0)){var T;switch(g(this.sky_model)){case 0:(T=p(this.gold_prefab)).getComponent(u).init();break;case 1:(T=p(this.prop_prefab)).getComponent(m).init();break;default:(T=p(this.gold_prefab)).getComponent(u).init()}T.setPosition(new h(a.x+t+i/2,a.y+_/2+2*this.gold_sky_h,0)),T.setParent(this.node)}},o.spawnTerrain=function(e){var t=p(this.block_prefab);t.setParent(this.node),t.setPosition(new h(e,0,0));var i=t.getComponent(w),n=i.init(0===e).floor_data;if(this.blks.push(i),this.width+=i.getFullSize().x,0===e){var r=this.node.getPosition();this.player.setPlayerInitPos(new h(r.x+50,r.y+i.getFullSize().y,0))}else this.spawnGold(n,e,i.getMarginWidth());return i},t}(_)).prototype,"block_prefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(S.prototype,"gold_prefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(S.prototype,"prop_prefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(S.prototype,"freeze_prefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(S.prototype,"player",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=S))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/UiLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./resources.ts","./GameController.ts","./SimpleInput.ts"],(function(e){"use strict";var t,o,n,i,p,s,a,u,r,c,d,l,h,g,_,m,f,v;return{setters:[function(e){t=e.inheritsLoose,o=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){i=e.cclegacy,p=e._decorator,s=e.find,a=e.Animation,u=e.Label,r=e.resources,c=e.SpriteFrame,d=e.Sprite,l=e.Tween,h=e.director,g=e.Component},function(e){_=e.default},function(e){m=e.loadAsync},function(e){f=e.Action},function(e){v=e.SimpleInput}],execute:function(){var b;i._RF.push({},"7a666R38QRB4ZitFRh19Q3M","UiLayer",void 0);var w=p.ccclass;e("UiLayer",w("UiLayer")(b=function(e){function i(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).playerInfo=void 0,t.pauseAnimation=void 0,t.resumeFlag=!1,t}t(i,e);var p=i.prototype;return p.start=function(){this.pausePopupInit(),this.settlePopupInit(),this.stateInit(),this.setAudio(),this.pauseAnimation=s("pause_popup",this.node).getComponent(a)},p.update=function(e){v.instance.isActionJustPressed(f.act_pause_resume)&&(_.isPlaying()?this.onClickPauseButton():this.onClickResumeButton()),this.speedingIsShow(_.isSpeeding()),this.pointingIsShow(_.isPointing()),this.freezingIsShow(_.isFreezing())},p.setScore=function(e){s("score_box/score",this.node).getComponent(u).string=e.toString()},p.setAudio=function(){var e=this;_.getAudioManager().isMuted()?r.load("audio/audio_mute/spriteFrame",c,(function(t,o){s("audio_button",e.node).getComponent(d).spriteFrame=o})):r.load("audio/audio_play/spriteFrame",c,(function(t,o){s("audio_button",e.node).getComponent(d).spriteFrame=o}))},p.pausePopupInit=function(){s("pause_popup",this.node).active=!1,s("pause_popup/popup",this.node).active=!0,s("pause_popup/count_down",this.node).active=!1},p.pausePopupShow=function(){s("pause_popup",this.node).active=!0,s("pause_popup/popup",this.node).active=!0,s("pause_popup/count_down",this.node).active=!1,this.pauseAnimation.play("popup_show")},p.stateInit=function(){s("state_box/speeding",this.node).active=!1,s("state_box/pointing",this.node).active=!1,s("state_box/freezing",this.node).active=!1},p.speedingIsShow=function(e){s("state_box/speeding",this.node).active=e},p.pointingIsShow=function(e){s("state_box/pointing",this.node).active=e},p.freezingIsShow=function(e){s("state_box/freezing",this.node).active=e},p.pausePopupHide=function(){s("pause_popup",this.node).active=!1,s("pause_popup/popup",this.node).active=!1,s("pause_popup/count_down",this.node).active=!1},p.settlePopupInit=function(){s("settle_popup",this.node).active=!1},p.settlePopupShow=function(){var e=o(n().mark((function e(t,o,i,p){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s("settle_popup/popup/score",this.node).getComponent(u).string=o.toString()+" !!",!t){e.next=8;break}s("settle_popup/popup/box/text",this.node).getComponent(u).string="活动奖励已全部领取",s("settle_popup/popup/box/reward",this.node).active=!1,s("settle_popup/popup/box/reward_mask",this.node).active=!1,s("settle_popup/popup/box/reward_all",this.node).active=!0,e.next=23;break;case 8:if(!p){e.next=19;break}return s("settle_popup/popup/box/text",this.node).getComponent(u).string=i?"今天奖励已领取":"奖励已成功发送到游戏中邮箱！",e.next=12,m("reward/"+p);case 12:a=e.sent,s("settle_popup/popup/box/reward_all",this.node).active=!1,s("settle_popup/popup/box/reward",this.node).getComponent(d).spriteFrame=a,s("settle_popup/popup/box/reward",this.node).active=!0,s("settle_popup/popup/box/reward_mask",this.node).active=i,e.next=23;break;case 19:s("settle_popup/popup/box/text",this.node).getComponent(u).string="奖励发送失败，如有问题请咨询客服",s("settle_popup/popup/box/reward",this.node).active=!1,s("settle_popup/popup/box/reward_mask",this.node).active=!1,s("settle_popup/popup/box/reward_all",this.node).active=!0;case 23:s("settle_popup",this.node).active=!0;case 24:case"end":return e.stop()}}),e,this)})));return function(t,o,n,i){return e.apply(this,arguments)}}(),p.onClickPauseButton=function(){_.getAudioManager().beep("sfx_click"),_.pause(),this.pausePopupShow()},p.onClickResumeButton=function(){this.resumeFlag||(this.resumeFlag=!0,_.getAudioManager().beep("sfx_click"),s("pause_popup/popup",this.node).active=!1,s("pause_popup/count_down",this.node).active=!0,this.getComponent(a).play("count_down"))},p.onCountDownAnimationComplete=function(){this.pausePopupHide(),_.resume(),this.resumeFlag=!1},p.onClickRestartButton=function(){_.getAudioManager().beep("sfx_click"),l.stopAll(),_.startGame(),_.getAudioManager().playMusic("music_playing_bgm",!0)},p.onClickExitButton=function(){_.getAudioManager().beep("sfx_click"),l.stopAll(),h.loadScene("start")},p.onClickShareButton=function(){_.getAudioManager().beep("sfx_click"),window.open("https://twitter.com/intent/tweet?url="+encodeURIComponent("https://bluearchive.jp/kourintaisai/game01\n\n")+"&text="+encodeURIComponent("トレーニングのスコアは……"+_.getPlayerScore()+"点！\n\nスミレさんとシロコさんのトレーニングを手伝い、一緒にキヴォトス大運動会「晄輪大祭」を盛り上げましょう！\n▼期間限定ミニゲーム\n\n")+"&hashtags="+encodeURIComponent("ブルアカ\n,晄輪大祭"),"_blank")},p.onClickAudioButton=function(e){_.getAudioManager().beep("sfx_click"),_.getAudioManager().isMuted()?(_.getAudioManager().unmute(),r.load("audio/audio_play/spriteFrame",c,(function(t,o){e.currentTarget.getComponent(d).spriteFrame=o}))):(_.getAudioManager().mute(),r.load("audio/audio_mute/spriteFrame",c,(function(t,o){e.currentTarget.getComponent(d).spriteFrame=o})))},p.onClickQuitButton=function(){_.getAudioManager().beep("sfx_click"),this.scheduleOnce((function(){window.location.href="yostarsdk://webview_close"}),.5)},i}(g))||b);i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});